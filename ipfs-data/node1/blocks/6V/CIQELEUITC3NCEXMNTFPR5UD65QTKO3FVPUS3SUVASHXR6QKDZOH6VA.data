ror(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){const e="string"===typeof t?this._codecsByName:this._codecsByCode;if(null!=e[t])return e[t];const n=await this._loadCodec(t);return null==e[t]&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const Dg=async t=>Promise.reject(new Error(`No hasher found for "${t}"`));class jg{_hashersByName;_hashersByCode;_loadHasher;constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher??Dg;for(const e of t.hashers)this.addHasher(e)}addHasher(t){if(null!=this._hashersByName[t.name]||null!=this._hashersByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){const e="string"===typeof t?this._hashersByName:this._hashersByCode;if(null!=e[t])return e[t];const n=await this._loadHasher(t);return null==e[t]&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function _g(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await t.post("log/level",{signal:r.signal,searchParams:ws({arg:[e,n],...r}),headers:r.headers});return ys(await o.json())}}function Hg(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("log/ls",{signal:e.signal,searchParams:ws(e),headers:e.headers});return(await n.json()).Strings}}function Fg(t){return function(){try{let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await t.post("log/tail",{signal:e.signal,searchParams:ws(e),headers:e.headers});yield*n.ndjson()}()}catch(e){return Promise.reject(e)}}}function Vg(t){switch(t.Type){case 1:case 5:return"dir";default:return"file"}}function Mg(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("name/publish",{signal:n.signal,searchParams:ws({arg:`${e}`,...n}),headers:n.headers});return ys(await r.json())}}function zg(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:ws({arg:e,...n}),headers:n.headers});return ys(await r.json())}}function Gg(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("name/pubsub/state",{signal:e.signal,searchParams:ws(e),headers:e.headers});return ys(await n.json())}}function qg(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("name/pubsub/subs",{signal:e.signal,searchParams:ws(e),headers:e.headers});return(await n.json()).Strings??[]}}function Wg(t){return{cancel:zg(t),state:Gg(t),subs:qg(t)}}function Jg(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await t.post("name/resolve",{signal:n.signal,searchParams:ws({arg:e,stream:!0,...n}),headers:n.headers});for await(const t of r.ndjson())yield t.Path}()}catch(n){return Promise.reject(n)}}}function Zg(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await t.post("object/patch/add-link",{signal:r.signal,searchParams:ws({arg:[`${e}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...r}),headers:r.headers}),{Hash:i}=await o.json();return Ot.TO.parse(i)}}function Kg(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await t.post("object/patch/rm-link",{signal:r.signal,searchParams:ws({arg:[`${e}`,n.Name??n.name??null],...r}),headers:r.headers}),{Hash:i}=await o.json();return Ot.TO.parse(i)}}function Yg(t){return{addLink:Zg(t),rmLink:Kg(t)}}function Qg(t){return null!=Ot.TO.asCID(t)}async function*Xg(t){if(null===t||void 0===t)throw new us(`Unexpected input: ${t}`);const e=Ot.TO.asCID(t);if(null==e){if("string"!==typeof t){if(null!=t.cid||null!=t.path)return yield tp(t);if(n=t,Symbol.iterator in n){const e=t[Symbol.iterator](),n=e.next();if(!0===n.done)return e;if(Qg(n.value)){yield tp({cid:n.value});for(const t of e)yield tp({cid:t});return}if("string"===typeof n.value){yield tp({path:n.value});for(const t of e)yield tp({path:t});return}if(null!=n.value.cid||null!=n.value.path){yield tp(n.value);for(const t of e)yield tp(t);return}throw new us("Unexpected input: "+typeof t)}var n;if(function(t){return Symbol.asyncIterator in t}(t)){const e=t[Symbol.asyncIterator](),n=await e.next();if(!0===n.done)return e;if(Qg(n.value)){yield tp({cid:n.value});for await(const t of e)yield tp({cid:t});return}if("string"===typeof n.value){yield tp({path:n.value});for await(const t of e)yield tp({path:t});return}if(null!=n.value.cid||null!=n.value.path){yield tp(n.value);for await(const t of e)yield tp(t);return}throw new us("Unexpected input: "+typeof t)}throw new us("Unexpected input: "+typeof t)}yield tp({path:t})}else yield tp({cid:e})}function tp(t){const e=t.cid??`${t.path}`;if(null==e)throw new us("Unexpected input: Please path either a CID or an IPFS path");const n={path:e,recursive:!1!==t.recursive};return null!=t.metadata&&(n.metadata=t.metadata),n}function ep(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:o,metadata:i}of Xg(e)){const e=await t.post("pin/add",{signal:n.signal,searchParams:ws({...n,arg:r,recursive:o,metadata:null!=i?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(const t of e.ndjson())if(null==t.Pins)yield Ot.TO.parse(t);else for(const e of t.Pins)yield Ot.TO.parse(e)}}()}catch(n){return Promise.reject(n)}}}function np(t){const e=ep(t);return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await Bs(e([{path:t.toString(),...n}],n));if(null==r)throw new Error("No response received");return r}}function rp(t,e,n){const r={type:t,cid:Ot.TO.parse(e)};return null!=n&&(r.metadata=n),r}function op(t){return function(){try{let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let n=[];null!=e.paths&&(n=Array.isArray(e.paths)?e.paths:[e.paths]);const r=await t.post("pin/ls",{signal:e.signal,searchParams:ws({...e,arg:n.map((t=>`${t}`)),stream:!0}),headers:e.headers});for await(const t of r.ndjson()){if(null!=t.Keys){for(const e of Object.keys(t.Keys))yield rp(t.Keys[e].Type,e,t.Keys[e].Metadata);return}yield rp(t.Type,t.Cid,t.Metadata)}}()}catch(e){return Promise.reject(e)}}}const ip=t=>{let{Name:e,Status:n,Cid:r}=t;return{cid:Ot.TO.parse(r),name:e,status:n}},sp=t=>{if("string"===typeof t&&""!==t)return t;throw new TypeError("service name must be passed")},ap=t=>{if(null!=Ot.TO.asCID(t))return t.toString();throw new TypeError("CID instance expected instead of "+typeof t)},up=t=>{let{service:e,cid:n,name:r,status:o,all:i}=t;const s=ws({service:sp(e),name:r,force:!0===i||void 0});if(null!=n)for(const a of n)s.append("cid",ap(a));if(null!=o)for(const a of o)s.append("status",a);return s},cp=(t,e)=>{let{service:n,background:r,name:o,origins:i}=e;const s=ws({arg:ap(t),service:sp(n),name:o,background:!0===r||void 0});if(null!=i)for(const a of i)s.append("origin",a.toString());return s};function lp(t){return async function(e,n){let{timeout:r,signal:o,headers:i,...s}=n;const a=await t.post("pin/remote/add",{timeout:r,signal:o,headers:i,searchParams:cp(e,s)});return ip(await a.json())}}function hp(t){return function(e){try{let{timeout:n,signal:r,headers:o,...i}=e;return async function*(){const e=await t.post("pin/remote/ls",{timeout:n,signal:r,headers:o,searchParams:up(i)});for await(const t of e.ndjson())yield ip(t)}()}catch(n){return Promise.reject(n)}}}function fp(t){return async function(e){let{timeout:n,signal:r,headers:o,...i}=e;await t.post("pin/remote/rm",{timeout:n,signal:r,headers:o,searchParams:up({...i,all:!0})})}}function dp(t){return async function(e){let{timeout:n,signal:r,headers:o,...i}=e;await t.post("pin/remote/rm",{timeout:n,signal:r,headers:o,searchParams:up({...i,all:!1})})}}function gp(t){const e=String(t);if("undefined"===e)throw Error("endpoint is required");return"/"===e[e.length-1]?e.slice(0,-1):e}function pp(t){const e={service:t.Service,endpoint:new URL(t.ApiEndpoint)};return null!=t.Stat&&(e.stat=function(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:n,Queued:r,Failed:o}=t.PinCount;return{status:"valid",pinCount:{queued:r,pinning:e,pinned:n,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}(t.Stat)),e}function yp(t){return async function(e,n){const{endpoint:r,key:o,headers:i,timeout:s,signal:a}=n;await t.post("pin/remote/service/add",{timeout:s,signal:a,searchParams:ws({arg:[e,gp(r),o]}),headers:i})}}function wp(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stat:n,headers:r,timeout:o,signal:i}=e,s=await t.post("pin/remote/service/ls",{timeout:o,signal:i,headers:r,searchParams:!0===n?ws({stat:n}):void 0});return(await s.json()).RemoteServices.map(pp)}}function mp(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:ws({arg:e})})}}function bp(t){return{add:yp(t),ls:wp(t),rm:mp(t)}}function vp(t){return{add:lp(t),ls:hp(t),rm:dp(t),rmAll:fp(t),service:bp(t)}}function Ep(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:o}of Xg(e)){const e=new URLSearchParams(n.searchParams);e.append("arg",`${r}`),null!=o&&e.set("recursive",String(o));const i=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:ws({...n,arg:`${r}`,recursive:o})});for await(const t of i.ndjson())null==t.Pins?yield Ot.TO.parse(t):yield*t.Pins.map((t=>Ot.TO.parse(t)))}}()}catch(n){return Promise.reject(n)}}}function Bp(t){const e=Ep(t);return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await Bs(e([{path:t.toString(),...n}],n));if(null==r)throw new Error("No response received");return r}}function kp(t,e="utf8"){const n=zf[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.encoder.encode(t).substring(1)}const Ap=t=>kp(xp(t)),xp=t=>yn.base64url.decode(t),Sp=t=>BigInt(`0x${kp(yn.base64url.decode(t),"base16")}`),Ip=t=>yn.base64url.encode(Gf(t));function Np(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Strings:n}=await(await t.post("pubsub/ls",{signal:e.signal,searchParams:ws(e),headers:e.headers})).json();return r=n,(Array.isArray(r)?r.map(Ap):r)??[];var r}}function Cp(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("pubsub/peers",{signal:n.signal,searchParams:ws({arg:Ip(e),...n}),headers:n.headers}),{Strings:o}=await r.json();return o??[]}}function Up(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=ws({arg:Ip(e),...r}),i=new AbortController,s=_i([i.signal,r.signal]);try{const e=await t.post("pubsub/pub",{signal:s,searchParams:o,...await ps([n],i,r.headers)});await e.text()}finally{s.clear()}}}const Tp=Fd("js-kubo-rpc-client:pubsub:subscribe");function $p(t,e){return async function(n,r){let o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s.signal=e.subscribe(n,r,s.signal);const a=new Promise(((t,e)=>{o=t,i=e})),u=setTimeout((()=>{o()}),1e3);return t.post("pubsub/sub",{signal:s.signal,searchParams:ws({arg:Ip(n),...s}),headers:s.headers}).catch((t=>{e.unsubscribe(n,r),i(t)})).then((t=>{clearTimeout(u),null!=t&&(!async function(t,e){let{onMessage:n,onEnd:r,onError:o}=e;o=o??Tp;try{for await(const e of t.ndjson())try{if(null==e.from)continue;null!=e.from&&null!=e.seqno?n({type:"signed",from:Af(e.from),data:xp(e.data),sequenceNumber:Sp(e.seqno),topic:Ap(e.topicIDs[0]),key:null!=e.key?af(xp(e.key??"u")):void 0,signature:xp(e.signature??"u")}):n({type:"unsigned",data:xp(e.data),topic:Ap(e.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,o(i,!1,e)}}catch(i){Op(i)||o(i,!0)}finally{r()}}(t,{onMessage:t=>{null!=r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(t):r(t))},onEnd:()=>{e.unsubscribe(n,r)},onError:s.onError}),o())})),a}}const Op=t=>{switch(t.type){case"aborted":case"abort":return!0;default:return"AbortError"===t.name}};class Lp{_subs;constructor(){this._subs=new Map}subscribe(t,e,n){const r=this._subs.get(t)??[];if(null!=r.find((t=>t.handler===e)))throw new Error(`Already subscribed to ${t} with this handler`);const o=new AbortController;return this._subs.set(t,[{handler:e,controller:o}].concat(r)),null!=n&&n.addEventListener("abort",(()=>{this.unsubscribe(t,e)})),o.signal}unsubscribe(t,e){const n=this._subs.get(t)??[];let r;null!=e?(this._subs.set(t,n.filter((t=>t.handler!==e))),r=n.filter((t=>t.handler===e))):(this._subs.set(t,[]),r=n),0===(this._subs.get(t)??[]).length&&this._subs.delete(t),r.forEach((t=>{t.controller.abort()}))}}function Rp(t){return function(){try{let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await t.post("refs/local",{signal:e.signal,transform:ys,searchParams:ws(e),headers:e.headers});yield*n.ndjson()}()}catch(e){return Promise.reject(e)}}}function Pp(t){return function(){try{let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await t.post("repo/gc",{signal:e.signal,searchParams:ws(e),headers:e.headers,transform:t=>({err:null!=t.Error?new Error(t.Error):null,cid:null!=t.Key?.["/"]?Ot.TO.parse(t.Key["/"]):null})});yield*n.ndjson()}()}catch(e){return Promise.reject(e)}}}function Dp(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("repo/stat",{signal:e.signal,searchParams:ws(e),headers:e.headers}),r=await n.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}}}function jp(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await(await t.post("repo/version",{signal:e.signal,searchParams:ws(e),headers:e.headers})).json()).Version}}function _p(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await t.post("routing/findpeer",{signal:n.signal,searchParams:ws({arg:e.toString(),stream:!0,...n}),headers:n.headers});for await(const t of r.ndjson())yield nd(t)}()}catch(n){return Promise.reject(n)}}}function Hp(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await t.post("routing/findprovs",{signal:n.signal,searchParams:ws({arg:e.toString(),...n}),headers:n.headers});for await(const t of r.ndjson())yield nd(t)}()}catch(n){return Promise.reject(n)}}}function Fp(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await t.post("routing/get",{signal:n.signal,searchParams:ws({arg:e instanceof Uint8Array?kp(e):e.toString(),...n}),headers:n.headers});for await(const t of r.ndjson())yield nd(t)}()}catch(n){return Promise.reject(n)}}}function Vp(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return async function*(){const r=Array.isArray(e)?e:[e],o=await t.post("routing/provide",{signal:n.signal,searchParams:ws({arg:r.map((t=>t.toString())),...n}),headers:n.headers});for await(const t of o.ndjson())yield nd(t)}()}catch(n){return Promise.reject(n)}}}function Mp(t){return function(e,n){try{let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async function*(){const o=new AbortController,i=_i([o.signal,r.signal]);try{const s=await t.post("routing/put",{signal:i,searchParams:ws({arg:e instanceof Uint8Array?kp(e):e.toString(),stream:!0,...r}),...await ps([n],o,r.headers)});for await(const t of s.ndjson())yield nd(t)}finally{i.clear()}}()}catch(r){return Promise.reject(r)}}}function zp(t){return function(){try{let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await t.post("stats/bw",{signal:e.signal,searchParams:ws(e),headers:e.headers,transform:t=>({totalIn:BigInt(t.TotalIn),totalOut:BigInt(t.TotalOut),rateIn:parseFloat(t.RateIn),rateOut:parseFloat(t.RateOut)})});yield*n.ndjson()}()}catch(e){return Promise.reject(e)}}}function Gp(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("swarm/addrs",{signal:e.signal,searchParams:ws(e),headers:e.headers}),{Addrs:r}=await n.json();return Object.keys(r).map((t=>({id:Af(t),addrs:(r[t]??[]).map((t=>(0,u.HZ)(t)))})))}}function qp(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("swarm/connect",{signal:n.signal,searchParams:ws({arg:e,...n}),headers:n.headers}),{Strings:o}=await r.json();return o??[]}}function Wp(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("swarm/disconnect",{signal:n.signal,searchParams:ws({arg:e,...n}),headers:n.headers}),{Strings:o}=await r.json();return o??[]}}function Jp(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("swarm/addrs/local",{signal:e.signal,searchParams:ws(e),headers:e.headers}),{Strings:r}=await n.json();return(r??[]).map((t=>(0,u.HZ)(t)))}}function Zp(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("swarm/peers",{signal:e.signal,searchParams:ws(e),headers:e.headers});return((await n.json()).Peers??[]).map((t=>({addr:(0,u.HZ)(t.Addr),peer:Af(t.Peer),muxer:t.Muxer,latency:t.Latency,streams:t.Streams,direction:null==t.Direction?void 0:0===t.Direction?"inbound":"outbound"})))}}class Kp{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(t){const e=new $g(t),n={name:ji.identity.name,code:ji.identity.code,encode:t=>t,decode:t=>t},a=Object.values(Di.Fo);(t.ipld?.bases??[]).forEach((t=>a.push(t))),this.bases=new Lg({bases:a,loadBase:t.ipld?.loadBase});const u=Object.values(Di.qr);[i,r,o,s,n].concat(t.ipld?.codecs??[]).forEach((t=>{u.push(t)})),this.codecs=new Pg({codecs:u,loadCodec:t.ipld?.loadCodec});const c=Object.values(Di.RY);(t.ipld?.hashers??[]).forEach((t=>c.push(t))),this.hashers=new jg({hashers:c,loadHasher:t.ipld?.loadHasher}),this.bitswap=function(t){return{wantlist:Nf(t),wantlistForPeer:If(t),stat:Sf(t)}}(e),this.block=function(t){return{get:Cf(t),put:Uf(t),rm:Tf(t),stat:Of(t)}}(e),this.bootstrap=function(t){return{add:Lf(t),list:Rf(t),rm:Pf(t)}}(e),this.config=function(t){return{getAll:Df(t),get:jf(t),set:Wf(t),replace:qf(t),profiles:Hf(t)}}(e),this.dag=function(t,e){return{export:Zf(t),get:Qf(t,e),import:Xf(t),put:td(t,e),resolve:ed(t)}}(e,this.codecs),this.dht=function(t){return{query:rd(t)}}(e),this.diag=function(t){return{cmds:sd(t),net:ad(t),sys:ud(t)}}(e),this.files=function(t){return{cp:cd(t),flush:ld(t),ls:fd(t),mkdir:gd(t),mv:pd(t),read:wd(t),rm:md(t),stat:bd(t),write:vd(t)}}(e),this.key=function(t){return{gen:kd(t),import:Ad(t),list:xd(t),rename:Sd(t),rm:Id(t)}}(e),this.log=function(t){return{level:_g(t),ls:Hg(t),tail:Fg(t)}}(e),this.name=function(t){return{publish:Mg(t),resolve:Jg(t),pubsub:Wg(t)}}(e),this.object=function(t){return{patch:Yg(t)}}(e,this.codecs),this.pin=function(t){return{addAll:ep(t),add:np(t),ls:op(t),rmAll:Ep(t),rm:Bp(t),remote:vp(t)}}(e),this.pubsub=function(t){const e=new Lp;return{ls:Np(t),peers:Cp(t),publish:Up(t),subscribe:$p(t,e),unsubscribe:(n=e,async function(t,e){n.unsubscribe(t,e)})};var n}(e),this.refs=function(t){return Object.assign((function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=Array.isArray(e)?e:[e],o=await t.post("refs",{signal:n.signal,searchParams:ws({arg:r.map((t=>`${t instanceof Uint8Array?Ot.TO.decode(t):t}`)),...n}),headers:n.headers,transform:ys});yield*o.ndjson()}()}catch(n){return Promise.reject(n)}}),{local:Rp(t)})}(e),this.repo=function(t){return{gc:Pp(t),stat:Dp(t),version:jp(t)}}(e),this.routing=function(t){return{findPeer:_p(t),findProvs:Hp(t),get:Fp(t),provide:Vp(t),put:Mp(t)}}(e),this.stats=function(t){return{bitswap:Sf(t),repo:Dp(t),bw:zp(t)}}(e),this.swarm=function(t){return{addrs:Gp(t),connect:qp(t),disconnect:Wp(t),localAddrs:Jp(t),peers:Zp(t)}}(e),this.add=function(t){const e=ms(t);return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=As(t),o=e(r,n),i=await Bs(o);if(null==i)throw new Error("Invalid body");return i}}(e),this.addAll=ms(e),this.cat=function(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await t.post("cat",{signal:n.signal,searchParams:ws({arg:e.toString(),...n}),headers:n.headers});yield*r.iterator()}()}catch(n){return Promise.reject(n)}}}(e),this.get=function(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r={arg:`${e instanceof Uint8Array?Ot.TO.decode(e):e}`,...n},o=await t.post("get",{signal:n.signal,searchParams:ws(r),headers:n.headers});yield*o.iterator()}()}catch(n){return Promise.reject(n)}}}(e),this.ls=function(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=`${e instanceof Uint8Array?Ot.TO.decode(e):e}`;async function o(e){let n=e.Hash;if(!0===n.includes("/")){const e=!0===n.startsWith("/ipfs/")?n:`/ipfs/${n}`;n=(await bd(t)(e)).cid}else n=Ot.TO.parse(n);return{name:e.Name,path:r+(null!=e.Name?`/${e.Name}`:""),size:e.Size,cid:n,type:Vg(e)}}const i=await t.post("ls",{signal:n.signal,searchParams:ws({arg:r,...n}),headers:n.headers});for await(let t of i.ndjson()){if(t=t.Objects,null==t)throw new Error("expected .Objects in results");if(t=t[0],null==t)throw new Error("expected one array in results.Objects");const e=t.Links;if(!Array.isArray(e))throw new Error("expected one array in results.Objects[0].Links");if(0===e.length)return void(yield o(t));yield*e.map(o)}}()}catch(n){return Promise.reject(n)}}}(e),this.id=Ed(e),this.version=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("version",{signal:e.signal,searchParams:ws(e),headers:e.headers});return{...ys(await n.json()),"ipfs-http-client":"1.0.0"}}}(e),this.stop=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("shutdown",{signal:e.signal,searchParams:ws(e),headers:e.headers});await n.text()}}(e),this.ping=function(t){return function(e){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await t.post("ping",{signal:n.signal,searchParams:ws({arg:`${e}`,...n}),headers:n.headers,transform:ys});yield*r.ndjson()}()}catch(n){return Promise.reject(n)}}}(e),this.resolve=function(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("resolve",{signal:n.signal,searchParams:ws({arg:e,...n}),headers:n.headers}),{Path:o}=await r.json();return o}}(e),this.commands=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.post("commands",{signal:e.signal,searchParams:ws(e),headers:e.headers})).json()}}(e),this.mount=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("dns",{signal:e.signal,searchParams:ws(e),headers:e.headers});return ys(await n.json())}}(e),this.isOnline=function(t){const e=Ed(t);return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=await e(t);return Boolean(n?.addresses?.length)}catch{return!1}}}(e),this.getEndpointConfig=function(t){return function(){const e=new URL(t.opts.base??"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}}}(e)}}n(2672);function Yp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return("string"===typeof t||(0,u.R8)(t)||t instanceof URL)&&(t={url:t}),function(t){return new Kp(t)}(t)}},8275:(t,e,n)=>{"use strict";var r=n(6382).Buffer;class o{static isArrayBuffer(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)}static toArrayBuffer(t){return this.isArrayBuffer(t)?t:t.byteLength===t.buffer.byteLength||0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:this.toUint8Array(t.buffer).slice(t.byteOffset,t.byteOffset+t.byteLength).buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,e){if(t.constructor===e)return t;if(this.isArrayBuffer(t))return new e(t);if(this.isArrayBufferView(t))return new e(t.buffer,t.byteOffset,t.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}static isEqual(t,e){const n=o.toUint8Array(t),r=o.toUint8Array(e);if(n.length!==r.byteLength)return!1;for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}static concat(){let t;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t=!Array.isArray(n[0])||n[1]instanceof Function?Array.isArray(n[0])&&n[1]instanceof Function?n[0]:n[n.length-1]instanceof Function?n.slice(0,n.length-1):n:n[0];let o=0;for(const a of t)o+=a.byteLength;const i=new Uint8Array(o);let s=0;for(const a of t){const t=this.toUint8Array(a);i.set(t,s),s+=t.length}return n[n.length-1]instanceof Function?this.toView(i,n[n.length-1]):i.buffer}}const i="string",s=/^[0-9a-f]+$/i,a=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,u=/^[a-zA-Z0-9-_]+$/;class c{static fromString(t){const e=unescape(encodeURIComponent(t)),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}static toString(t){const e=o.toUint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return decodeURIComponent(escape(n))}}class l{static toString(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=o.toArrayBuffer(t),r=new DataView(n);let i="";for(let o=0;o<n.byteLength;o+=2){const t=r.getUint16(o,e);i+=String.fromCharCode(t)}return i}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new ArrayBuffer(2*t.length),r=new DataView(n);for(let o=0;o<t.length;o++)r.setUint16(2*o,t.charCodeAt(o),e);return n}}class h{static isHex(t){return typeof t===i&&s.test(t)}static isBase64(t){return typeof t===i&&a.test(t)}static isBase64Url(t){return typeof t===i&&u.test(t)}static ToString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const n=o.toUint8Array(t);switch(e.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return l.toString(n,!0);case"utf16":case"utf16be":return l.toString(n);default:throw new Error(`Unknown type of encoding '${e}'`)}}static FromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!t)return new ArrayBuffer(0);switch(e.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);case"utf16le":return l.fromString(t,!0);case"utf16":case"utf16be":return l.fromString(t);default:throw new Error(`Unknown type of encoding '${e}'`)}}static ToBase64(t){const e=o.toUint8Array(t);if("undefined"!==typeof btoa){const t=this.ToString(e,"binary");return btoa(t)}return r.from(e).toString("base64")}static FromBase64(t){const e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isBase64(e))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!==typeof atob?this.FromBinary(atob(e)):new Uint8Array(r.from(e,"base64")).buffer}static FromBase64Url(t){const e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isBase64Url(e))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.DEFAULT_UTF8_ENCODING;switch(e){case"ascii":return this.FromBinary(t);case"utf8":return c.fromString(t);case"utf16":case"utf16be":return l.fromString(t);case"utf16le":case"usc2":return l.fromString(t,!0);default:throw new Error(`Unknown type of encoding '${e}'`)}}static ToUtf8String(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.DEFAULT_UTF8_ENCODING;switch(e){case"ascii":return this.ToBinary(t);case"utf8":return c.toString(t);case"utf16":case"utf16be":return l.toString(t);case"utf16le":case"usc2":return l.toString(t,!0);default:throw new Error(`Unknown type of encoding '${e}'`)}}static FromBinary(t){const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n.buffer}static ToBinary(t){const e=o.toUint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n}static ToHex(t){const e=o.toUint8Array(t);let n="";const r=e.length;for(let o=0;o<r;o++){const t=e[o];t<16&&(n+="0"),n+=t.toString(16)}return n}static FromHex(t){let e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isHex(e))throw new TypeError("Argument 'hexString' is not HEX encoded");e.length%2&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const t=e.slice(r,r+2);n[r/2]=parseInt(t,16)}return n.buffer}static ToUtf16String(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.toString(t,e)}static FromUtf16String(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.fromString(t,e)}static Base64Padding(t){const e=4-t.length%4;if(e<4)for(let n=0;n<e;n++)t+="=";return t}static formatString(t){return(null===t||void 0===t?void 0:t.replace(/[\n\r\t ]/g,""))||""}}h.DEFAULT_UTF8_ENCODING="utf8",e._H=o,e.U$=h}}]);
//# sourceMappingURL=793.9b9b25d5.chunk.js.map