{let n=e.split("/"),r=n[0];if(2!==n.length)throw new Error(`invalid CIDR subnet: ${r}`);let o=t.fromPrefixLen(parseInt(n[1],10));return t.subnet(r,o)},t.not=function(e){let n=t.toBuffer(e);for(let t=0;t<n.length;t++)n[t]=255^n[t];return t.toString(n)},t.or=function(e,n){if(e=t.toBuffer(e),n=t.toBuffer(n),e.length===n.length){for(let t=0;t<e.length;++t)e[t]|=n[t];return t.toString(e)}let r=e,o=n;n.length>e.length&&(r=n,o=e);let i=r.length-o.length;for(let t=i;t<r.length;++t)r[t]|=o[t-i];return t.toString(r)},t.isEqual=function(e,n){if(e=t.toBuffer(e),n=t.toBuffer(n),e.length===n.length){for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}if(4===n.length){let t=n;n=e,e=t}for(let t=0;t<10;t++)if(0!==n[t])return!1;let r=n.readUInt16BE(10);if(0!==r&&65535!==r)return!1;for(let t=0;t<4;t++)if(e[t]!==n[t+12])return!1;return!0},t.isPrivate=function(e){if(t.isLoopback(e))return!0;if(!t.isV6Format(e)){let n=t.normalizeToLong(e);if(n<0)throw new Error("invalid ipv4 address");e=t.fromLong(n)}return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},t.isPublic=function(e){return!t.isPrivate(e)},t.isLoopback=function(e){return!/\./.test(e)&&!/:/.test(e)&&(e=t.fromLong(Number(e))),/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^0177\./.test(e)||/^0x7f\./i.test(e)||/^fe80::1$/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},t.loopback=function(e){if("ipv4"!==(e=s(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},t.address=function(e,n){let o=r.networkInterfaces();if(n=s(n),e&&"private"!==e&&"public"!==e){let t=o[e].filter((e=>s(e.family)===n));return 0===t.length?void 0:t[0].address}let i=Object.keys(o).map((r=>{let i=o[r].filter((r=>(r.family=s(r.family),r.family===n&&!t.isLoopback(r.address)&&(!e||("public"===e?t.isPrivate(r.address):t.isPublic(r.address))))));return i.length?i[0].address:void 0})).filter(Boolean);return i.length?i[0]:t.loopback(n)},t.toLong=function(e){let t=0;return e.split(".").forEach((e=>{t<<=8,t+=parseInt(e)})),t>>>0},t.fromLong=function(e){return`${e>>>24}.${e>>16&255}.${e>>8&255}.${255&e}`},t.normalizeToLong=function(e){let t=e.split(".").map((e=>e.startsWith("0x")||e.startsWith("0X")?parseInt(e,16):e.startsWith("0")&&"0"!==e&&/^[0-7]+$/.test(e)?parseInt(e,8):/^[1-9]\d*$/.test(e)||"0"===e?parseInt(e,10):NaN));if(t.some(isNaN))return-1;let n=0;switch(t.length){case 1:n=t[0];break;case 2:if(t[0]>255||t[1]>16777215)return-1;n=t[0]<<24|16777215&t[1];break;case 3:if(t[0]>255||t[1]>255||t[2]>65535)return-1;n=t[0]<<24|t[1]<<16|65535&t[2];break;case 4:if(t.some((e=>e>255)))return-1;n=t[0]<<24|t[1]<<16|t[2]<<8|t[3];break;default:return-1}return n>>>0}})),Oe=["string","number","bigint","symbol"],Be=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function De(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";let t=typeof e;if(Oe.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";let n=function(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Be.includes(t))return t}(e);return n||"Object"}var Ne=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Ne.uint=new Ne(0,"uint",!0),Ne.negint=new Ne(1,"negint",!0),Ne.bytes=new Ne(2,"bytes",!0),Ne.string=new Ne(3,"string",!0),Ne.array=new Ne(4,"array",!1),Ne.map=new Ne(5,"map",!1),Ne.tag=new Ne(6,"tag",!1),Ne.float=new Ne(7,"float",!0),Ne.false=new Ne(7,"false",!0),Ne.true=new Ne(7,"true",!0),Ne.null=new Ne(7,"null",!0),Ne.undefined=new Ne(7,"undefined",!0),Ne.break=new Ne(7,"break",!0);var Pe=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}},Fe=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,_e=new TextDecoder,Le=new TextEncoder;function Re(e){return Fe&&globalThis.Buffer.isBuffer(e)}var Ue=Fe?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):Ve(e,t,n):(e,t,n)=>n-t>64?_e.decode(e.subarray(t,n)):Ve(e,t,n),Me=Fe?e=>e.length>64?globalThis.Buffer.from(e):ze(e):e=>e.length>64?Le.encode(e):ze(e),je=Fe?(e,t,n)=>Re(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),$e=Fe?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),function(e){return e instanceof Uint8Array?Re(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}(globalThis.Buffer.concat(e,t))):(e,t)=>{let n=new Uint8Array(t),r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},He=Fe?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function ze(e){let t=[],n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t}function Ve(e,t,n){let r=[];for(;t<n;){let o=e[t],i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=n){let n,r,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:n=e[t+1],128===(192&n)&&(u=(31&o)<<6|63&n,u>127&&(i=u));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(u=(15&o)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),t+=s}return function(e){let t=e.length;if(t<=Ge)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Ge));return n}(r)}var Ge=4096;var We="CBOR decode error:",qe="CBOR encode error:",Ke=[];function Ze(e,t,n){if(e.length-t<n)throw new Error(`${We} not enough data for type`)}Ke[23]=1,Ke[24]=2,Ke[25]=3,Ke[26]=5,Ke[27]=9;var Ye=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Je(e,t,n){Ze(e,t,1);let r=e[t];if(!0===n.strict&&r<Ye[0])throw new Error(`${We} integer encoded in more bytes than necessary (strict decode)`);return r}function Xe(e,t,n){Ze(e,t,2);let r=e[t]<<8|e[t+1];if(!0===n.strict&&r<Ye[1])throw new Error(`${We} integer encoded in more bytes than necessary (strict decode)`);return r}function Qe(e,t,n){Ze(e,t,4);let r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<Ye[2])throw new Error(`${We} integer encoded in more bytes than necessary (strict decode)`);return r}function et(e,t,n){Ze(e,t,8);let r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<Ye[3])throw new Error(`${We} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error(`${We} integers outside of the safe integer range are not supported`)}function tt(e,t){return nt(e,0,t.value)}function nt(e,t,n){if(n<Ye[0]){let r=Number(n);e.push([t|r])}else if(n<Ye[1]){let r=Number(n);e.push([24|t,r])}else if(n<Ye[2]){let r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<Ye[3]){let r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{let r=BigInt(n);if(!(r<Ye[4]))throw new Error(`${We} encountered BigInt larger than allowable range`);{let n=[27|t,0,0,0,0,0,0,0],o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,e.push(n)}}}tt.encodedSize=function(e){return nt.encodedSize(e.value)},nt.encodedSize=function(e){return e<Ye[0]?1:e<Ye[1]?2:e<Ye[2]?3:e<Ye[3]?5:9},tt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};var rt=BigInt(-1),ot=BigInt(1);function it(e,t){let n=t.value,r="bigint"==typeof n?n*rt-ot:-1*n-1;nt(e,t.type.majorEncoded,r)}function st(e,t,n,r){Ze(e,t,n+r);let o=je(e,t+n,t+n+r);return new Pe(Ne.bytes,o,n+r)}function at(e,t,n,r){return st(e,t,1,n)}function ut(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Ne.string?Me(e.value):e.value),e.encodedBytes}function lt(e,t){let n=ut(t);nt(e,t.type.majorEncoded,n.length),e.push(n)}function ct(e,t,n,r,o){let i=n+r;Ze(e,t,i);let s=new Pe(Ne.string,Ue(e,t+n,t+i),i);return!0===o.retainStringBytes&&(s.byteValue=je(e,t+n,t+i)),s}function ft(e,t,n,r){return ct(e,t,1,n,r)}it.encodedSize=function(e){let t=e.value,n="bigint"==typeof t?t*rt-ot:-1*t-1;return n<Ye[0]?1:n<Ye[1]?2:n<Ye[2]?3:n<Ye[3]?5:9},it.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},lt.encodedSize=function(e){let t=ut(e);return nt.encodedSize(t.length)+t.length},lt.compareTokens=function(e,t){return function(e,t){return e.length<t.length?-1:e.length>t.length?1:function(e,t){if(Re(e)&&Re(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(e,t)}(ut(e),ut(t))};var ht=lt;function dt(e,t,n,r){return new Pe(Ne.array,r,n)}function pt(e,t,n,r){return dt(0,0,1,n)}function gt(e,t){nt(e,Ne.array.majorEncoded,t.value)}function yt(e,t,n,r){return new Pe(Ne.map,r,n)}function mt(e,t,n,r){return yt(0,0,1,n)}function bt(e,t){nt(e,Ne.map.majorEncoded,t.value)}function vt(e,t,n,r){return new Pe(Ne.tag,n,1)}function wt(e,t){nt(e,Ne.tag.majorEncoded,t.value)}gt.compareTokens=tt.compareTokens,gt.encodedSize=function(e){return nt.encodedSize(e.value)},bt.compareTokens=tt.compareTokens,bt.encodedSize=function(e){return nt.encodedSize(e.value)},wt.compareTokens=tt.compareTokens,wt.encodedSize=function(e){return nt.encodedSize(e.value)};function Et(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${We} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${We} Infinity values are not supported`)}return new Pe(Ne.float,e,t)}function At(e,t,n){let r=t.value;if(!1===r)e.push([20|Ne.float.majorEncoded]);else if(!0===r)e.push([21|Ne.float.majorEncoded]);else if(null===r)e.push([22|Ne.float.majorEncoded]);else if(void 0===r)e.push([23|Ne.float.majorEncoded]);else{let t,o=!1;(!n||!0!==n.float64)&&(kt(r),t=xt(Tt,1),r===t||Number.isNaN(r)?(Tt[0]=249,e.push(Tt.slice(0,3)),o=!0):(It(r),t=Ot(Tt,1),r===t&&(Tt[0]=250,e.push(Tt.slice(0,5)),o=!0))),o||(function(e){St.setFloat64(0,e,!1)}(r),t=Bt(Tt,1),Tt[0]=251,e.push(Tt.slice(0,9)))}}At.encodedSize=function(e,t){let n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){kt(n);let e=xt(Tt,1);if(n===e||Number.isNaN(n))return 3;if(It(n),e=Ot(Tt,1),n===e)return 5}return 9};var Ct=new ArrayBuffer(9),St=new DataView(Ct,1),Tt=new Uint8Array(Ct,0);function kt(e){if(e===1/0)St.setUint16(0,31744,!1);else if(e===-1/0)St.setUint16(0,64512,!1);else if(Number.isNaN(e))St.setUint16(0,32256,!1);else{St.setFloat32(0,e);let t=St.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)St.setUint16(0,31744,!1);else if(0===n)St.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{let e=n-127;e<-24?St.setUint16(0,0):e<-14?St.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):St.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function xt(e,t){if(e.length-t<2)throw new Error(`${We} not enough data for float16`);let n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;let r,o=n>>10&31,i=1023&n;return r=0===o?i*2**-24:31!==o?(i+1024)*2**(o-25):0===i?1/0:NaN,32768&n?-r:r}function It(e){St.setFloat32(0,e,!1)}function Ot(e,t){if(e.length-t<4)throw new Error(`${We} not enough data for float32`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function Bt(e,t){if(e.length-t<8)throw new Error(`${We} not enough data for float64`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function Dt(e,t,n){throw new Error(`${We} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Nt(e){return()=>{throw new Error(`${We} ${e}`)}}At.compareTokens=tt.compareTokens;var Pt=[];for(let n=0;n<=23;n++)Pt[n]=Dt;Pt[24]=function(e,t,n,r){return new Pe(Ne.uint,Je(e,t+1,r),2)},Pt[25]=function(e,t,n,r){return new Pe(Ne.uint,Xe(e,t+1,r),3)},Pt[26]=function(e,t,n,r){return new Pe(Ne.uint,Qe(e,t+1,r),5)},Pt[27]=function(e,t,n,r){return new Pe(Ne.uint,et(e,t+1,r),9)},Pt[28]=Dt,Pt[29]=Dt,Pt[30]=Dt,Pt[31]=Dt;for(let n=32;n<=55;n++)Pt[n]=Dt;Pt[56]=function(e,t,n,r){return new Pe(Ne.negint,-1-Je(e,t+1,r),2)},Pt[57]=function(e,t,n,r){return new Pe(Ne.negint,-1-Xe(e,t+1,r),3)},Pt[58]=function(e,t,n,r){return new Pe(Ne.negint,-1-Qe(e,t+1,r),5)},Pt[59]=function(e,t,n,r){let o=et(e,t+1,r);if("bigint"!=typeof o){let e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new Pe(Ne.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${We} integers outside of the safe integer range are not supported`);return new Pe(Ne.negint,rt-BigInt(o),9)},Pt[60]=Dt,Pt[61]=Dt,Pt[62]=Dt,Pt[63]=Dt;for(let n=64;n<=87;n++)Pt[n]=at;Pt[88]=function(e,t,n,r){return st(e,t,2,Je(e,t+1,r))},Pt[89]=function(e,t,n,r){return st(e,t,3,Xe(e,t+1,r))},Pt[90]=function(e,t,n,r){return st(e,t,5,Qe(e,t+1,r))},Pt[91]=function(e,t,n,r){let o=et(e,t+1,r);if("bigint"==typeof o)throw new Error(`${We} 64-bit integer bytes lengths not supported`);return st(e,t,9,o)},Pt[92]=Dt,Pt[93]=Dt,Pt[94]=Dt,Pt[95]=Nt("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)Pt[n]=ft;Pt[120]=function(e,t,n,r){return ct(e,t,2,Je(e,t+1,r),r)},Pt[121]=function(e,t,n,r){return ct(e,t,3,Xe(e,t+1,r),r)},Pt[122]=function(e,t,n,r){return ct(e,t,5,Qe(e,t+1,r),r)},Pt[123]=function(e,t,n,r){let o=et(e,t+1,r);if("bigint"==typeof o)throw new Error(`${We} 64-bit integer string lengths not supported`);return ct(e,t,9,o,r)},Pt[124]=Dt,Pt[125]=Dt,Pt[126]=Dt,Pt[127]=Nt("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)Pt[n]=pt;Pt[152]=function(e,t,n,r){return dt(0,0,2,Je(e,t+1,r))},Pt[153]=function(e,t,n,r){return dt(0,0,3,Xe(e,t+1,r))},Pt[154]=function(e,t,n,r){return dt(0,0,5,Qe(e,t+1,r))},Pt[155]=function(e,t,n,r){let o=et(e,t+1,r);if("bigint"==typeof o)throw new Error(`${We} 64-bit integer array lengths not supported`);return dt(0,0,9,o)},Pt[156]=Dt,Pt[157]=Dt,Pt[158]=Dt,Pt[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${We} indefinite length items not allowed`);return dt(0,0,1,1/0)};for(let n=160;n<=183;n++)Pt[n]=mt;Pt[184]=function(e,t,n,r){return yt(0,0,2,Je(e,t+1,r))},Pt[185]=function(e,t,n,r){return yt(0,0,3,Xe(e,t+1,r))},Pt[186]=function(e,t,n,r){return yt(0,0,5,Qe(e,t+1,r))},Pt[187]=function(e,t,n,r){let o=et(e,t+1,r);if("bigint"==typeof o)throw new Error(`${We} 64-bit integer map lengths not supported`);return yt(0,0,9,o)},Pt[188]=Dt,Pt[189]=Dt,Pt[190]=Dt,Pt[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${We} indefinite length items not allowed`);return yt(0,0,1,1/0)};for(let n=192;n<=215;n++)Pt[n]=vt;Pt[216]=function(e,t,n,r){return new Pe(Ne.tag,Je(e,t+1,r),2)},Pt[217]=function(e,t,n,r){return new Pe(Ne.tag,Xe(e,t+1,r),3)},Pt[218]=function(e,t,n,r){return new Pe(Ne.tag,Qe(e,t+1,r),5)},Pt[219]=function(e,t,n,r){return new Pe(Ne.tag,et(e,t+1,r),9)},Pt[220]=Dt,Pt[221]=Dt,Pt[222]=Dt,Pt[223]=Dt;for(let n=224;n<=243;n++)Pt[n]=Nt("simple values are not supported");Pt[244]=Dt,Pt[245]=Dt,Pt[246]=Dt,Pt[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${We} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new Pe(Ne.null,null,1):new Pe(Ne.undefined,void 0,1)},Pt[248]=Nt("simple values are not supported"),Pt[249]=function(e,t,n,r){return Et(xt(e,t+1),3,r)},Pt[250]=function(e,t,n,r){return Et(Ot(e,t+1),5,r)},Pt[251]=function(e,t,n,r){return Et(Bt(e,t+1),9,r)},Pt[252]=Dt,Pt[253]=Dt,Pt[254]=Dt,Pt[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${We} indefinite length items not allowed`);return new Pe(Ne.break,void 0,1)};var Ft=[];for(let n=0;n<24;n++)Ft[n]=new Pe(Ne.uint,n,1);for(let n=-1;n>=-24;n--)Ft[31-n]=new Pe(Ne.negint,n,1);Ft[64]=new Pe(Ne.bytes,new Uint8Array(0),1),Ft[96]=new Pe(Ne.string,"",1),Ft[128]=new Pe(Ne.array,0,1),Ft[160]=new Pe(Ne.map,0,1),Ft[244]=new Pe(Ne.false,!1,1),Ft[245]=new Pe(Ne.true,!0,1),Ft[246]=new Pe(Ne.null,null,1);(function(){let e=[];e[Ne.uint.major]=tt,e[Ne.negint.major]=it,e[Ne.bytes.major]=lt,e[Ne.string.major]=ht,e[Ne.array.major]=gt,e[Ne.map.major]=bt,e[Ne.tag.major]=wt,e[Ne.float.major]=At})(),new class{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){let e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=He(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=je(n,0,this.cursor)}else t=$e(this.chunks,this.cursor);return e&&this.reset(),t}};var _t=class e{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${qe} object contains circular references`);return new e(n,t)}},Lt={null:new Pe(Ne.null,null),undefined:new Pe(Ne.undefined,void 0),true:new Pe(Ne.true,!0),false:new Pe(Ne.false,!1),emptyArray:new Pe(Ne.array,0),emptyMap:new Pe(Ne.map,0)},Rt={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new Pe(e>=0?Ne.uint:Ne.negint,e):new Pe(Ne.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new Pe(Ne.uint,e):new Pe(Ne.negint,e),Uint8Array:(e,t,n,r)=>new Pe(Ne.bytes,e),string:(e,t,n,r)=>new Pe(Ne.string,e),boolean:(e,t,n,r)=>e?Lt.true:Lt.false,null:(e,t,n,r)=>Lt.null,undefined:(e,t,n,r)=>Lt.undefined,ArrayBuffer:(e,t,n,r)=>new Pe(Ne.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new Pe(Ne.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[Lt.emptyArray,new Pe(Ne.break)]:Lt.emptyArray;r=_t.createCheck(r,e);let o=[],i=0;for(let s of e)o[i++]=Ut(s,n,r);return n.addBreakTokens?[new Pe(Ne.array,e.length),o,new Pe(Ne.break)]:[new Pe(Ne.array,e.length),o]},Object(e,t,n,r){let o="Object"!==t,i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return!0===n.addBreakTokens?[Lt.emptyMap,new Pe(Ne.break)]:Lt.emptyMap;r=_t.createCheck(r,e);let a=[],u=0;for(let l of i)a[u++]=[Ut(l,n,r),Ut(o?e.get(l):e[l],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new Pe(Ne.map,s),a,new Pe(Ne.break)]:[new Pe(Ne.map,s),a]}};Rt.Map=Rt.Object,Rt.Buffer=Rt.Uint8Array;for(let n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Rt[`${n}Array`]=Rt.DataView;function Ut(e,t={},n){let r=De(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||Rt[r];if("function"==typeof o){let i=o(e,r,t,n);if(null!=i)return i}let i=Rt[r];if(!i)throw new Error(`${qe} unsupported type: ${r}`);return i(e,r,t,n)}var Mt={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},jt=class{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],t=Ft[e];if(void 0===t){let n=Pt[e];if(!n)throw new Error(`${We} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let r=31&e;t=n(this.data,this._pos,r,this.options)}return this._pos+=t.encodedLength,t}},$t=Symbol.for("DONE"),Ht=Symbol.for("BREAK");function zt(e,t){if(e.done())return $t;let n=e.next();if(n.type===Ne.break)return Ht;if(n.type.terminal)return n.value;if(n.type===Ne.array)return function(e,t,n){let r=[];for(let o=0;o<e.value;o++){let i=zt(t,n);if(i===Ht){if(e.value===1/0)break;throw new Error(`${We} got unexpected break to lengthed array`)}if(i===$t)throw new Error(`${We} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=i}return r}(n,e,t);if(n.type===Ne.map)return function(e,t,n){let r=!0===n.useMaps,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<e.value;s++){let a=zt(t,n);if(a===Ht){if(e.value===1/0)break;throw new Error(`${We} got unexpected break to lengthed map`)}if(a===$t)throw new Error(`${We} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(!0!==r&&"string"!=typeof a)throw new Error(`${We} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&i.has(a)||!r&&a in o))throw new Error(`${We} found repeat map key "${a}"`);let u=zt(t,n);if(u===$t)throw new Error(`${We} found map but not enough entries (got ${s} [no value], expected ${e.value})`);r?i.set(a,u):o[a]=u}return r?i:o}(n,e,t);if(n.type===Ne.tag){if(t.tags&&"function"==typeof t.tags[n.value]){let r=zt(e,t);return t.tags[n.value](r)}throw new Error(`${We} tag not supported (${n.value})`)}throw new Error("unsupported")}function Vt(e,t){let[n,r]=function(e,t){if(!(e instanceof Uint8Array))throw new Error(`${We} data to decode must be a Uint8Array`);let n=(t=Object.assign({},Mt,t)).tokenizer||new jt(e,t),r=zt(n,t);if(r===$t)throw new Error(`${We} did not find any content to decode`);if(r===Ht)throw new Error(`${We} got unexpected break`);return[r,e.subarray(n.pos())]}(e,t);if(r.length>0)throw new Error(`${We} too many terminals, data makes no sense`);return n}new Uint8Array(0);function Gt(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var Wt=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==n[s])throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,u=e.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===u;)r++,t++;for(var i=(e.length-t)*l+1>>>0,s=new Uint8Array(i);e[t];){var c=n[e.charCodeAt(t)];if(255===c)return;for(var f=0,h=i-1;(0!==c||f<o)&&-1!==h;h--,f++)c+=a*s[h]>>>0,s[h]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");o=f,t++}if(" "!==e[t]){for(var d=i-o;d!==i&&0===s[d];)d++;for(var p=new Uint8Array(r+(i-d)),g=r;d!==i;)p[g++]=s[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var s=(i-o)*c+1>>>0,l=new Uint8Array(s);o!==i;){for(var f=t[o],h=0,d=s-1;(0!==f||h<r)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=h,o++}for(var p=s-r;p!==s&&0===l[p];)p++;for(var g=u.repeat(n);p<s;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:f,decode:function(e){var n=f(e);if(n)return n;throw new Error(`Non-${t} character`)}}},qt=class{name;prefix;baseEncode;constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Kt=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,n){this.name=e,this.prefix=t;let r=t.codePointAt(0);if(void 0===r)throw new Error("Invalid prefix character");this.prefixCodePoint=r,this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Yt(this,e)}},Zt=class{decoders;constructor(e){this.decoders=e}or(e){return Yt(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(null!=n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Yt(e,t){return new Zt({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var Jt=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new qt(e,t,n),this.decoder=new Kt(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Xt({name:e,prefix:t,encode:n,decode:r}){return new Jt(e,t,n,r)}function Qt({name:e,prefix:t,alphabet:n}){let{encode:r,decode:o}=Wt(n,e);return Xt({prefix:t,name:e,encode:r,decode:e=>Gt(o(e))})}function en({name:e,prefix:t,bitsPerChar:n,alphabet:r}){return Xt({prefix:t,name:e,encode:e=>function(e,t,n){let r="="===t[t.length-1],o=(1<<n)-1,i="",s=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(0!==s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i}(e,r,n),decode:t=>function(e,t,n,r){let o={};for(let c=0;c<t.length;++c)o[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;let s=new Uint8Array(i*n/8|0),a=0,u=0,l=0;for(let c=0;c<i;++c){let t=o[e[c]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);u=u<<n|t,a+=n,a>=8&&(a-=8,s[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s}(t,r,n,e)})}var tn=en({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nn=(en({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),en({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),en({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),en({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),en({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),en({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),en({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),en({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Qt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"})),rn=(Qt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Qt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"})),on=(Qt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),function e(t,n,r){n=n||[];for(var o=r=r||0;t>=un;)n[r++]=255&t|sn,t/=128;for(;t&an;)n[r++]=255&t|sn,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n}),sn=128,an=-128,un=Math.pow(2,31);var ln=function e(t,n){var r,o=0,i=0,s=n=n||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[s++],o+=i<28?(r&fn)<<i:(r&fn)*Math.pow(2,i),i+=7}while(r>=cn);return e.bytes=s-n,o},cn=128,fn=127;var hn=Math.pow(2,7),dn=Math.pow(2,14),pn=Math.pow(2,21),gn=Math.pow(2,28),yn=Math.pow(2,35),mn=Math.pow(2,42),bn=Math.pow(2,49),vn=Math.pow(2,56),wn=Math.pow(2,63),En={encode:on,decode:ln,encodingLength:function(e){return e<hn?1:e<dn?2:e<pn?3:e<gn?4:e<yn?5:e<mn?6:e<bn?7:e<vn?8:e<wn?9:10}};function An(e,t=0){return[En.decode(e,t),En.decode.bytes]}function Cn(e,t,n=0){return En.encode(e,t,n),t}function Sn(e){return En.encodingLength(e)}var Tn=class{code;size;digest;bytes;constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}};function kn(e,t){let{bytes:n,version:r}=e;return 0===r?function(e,t,n){let{prefix:r}=n;if(r!==rn.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let o=t.get(r);if(null==o){let o=n.encode(e).slice(1);return t.set(r,o),o}return o}(n,In(e),t??rn.encoder):function(e,t,n){let{prefix:r}=n,o=t.get(r);if(null==o){let o=n.encode(e);return t.set(r,o),o}return o}(n,In(e),t??tn.encoder)}var xn=new WeakMap;function In(e){let t=xn.get(e);if(null==t){let t=new Map;return xn.set(e,t),t}return t}var On=class e{code;version;multihash;bytes;"/";constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:n}=this;if(t!==Bn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==Dn)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:n}=this.multihash,r=function(e,t){let n=t.byteLength,r=Sn(e),o=r+Sn(n),i=new Uint8Array(o+n);return Cn(e,i,0),Cn(n,i,r),i.set(t,o),new Tn(e,n,t,i)}(t,n);return e.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(e,t){let n=t;return null!=n&&e.code===n.code&&e.version===n.version&&function(e,t){if(e===t)return!0;{let n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e.bytes,n.bytes)}}(e.multihash,n.multihash)}toString(e){return kn(this,e)}toJSON(){return{"/":kn(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;let n=t;if(n instanceof e)return n;if(null!=n["/"]&&n["/"]===n.bytes||n.asCID===n){let{version:t,code:r,multihash:o,bytes:i}=n;return new e(t,r,o,i??Nn(t,r,o.bytes))}if(!0===n[Pn]){let{version:t,multihash:r,code:o}=n,i=function(e){let t=Gt(e),[n,r]=An(t),[o,i]=An(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Tn(n,o,s,t)}(r);return e.create(t,o,i)}return null}static create(t,n,r){if("number"!=typeof n)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(n!==Bn)throw new Error(`Version 0 CID must use dag-pb (code: ${Bn}) block encoding`);return new e(t,n,r,r.bytes);case 1:{let o=Nn(t,n,r.bytes);return new e(t,n,r,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,Bn,t)}static createV1(t,n){return e.create(1,t,n)}static decode(t){let[n,r]=e.decodeFirst(t);if(0!==r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){let n=e.inspectBytes(t),r=n.size-n.multihashSize,o=Gt(t.subarray(r,r+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");let i=o.subarray(n.multihashSize-n.digestSize),s=new Tn(n.multihashCode,n.digestSize,i,o);return[0===n.version?e.createV0(s):e.createV1(n.codec,s),t.subarray(n.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=An(e.subarray(t));return t+=r,n},r=n(),o=Bn;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let i=t,s=n(),a=n(),u=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:u-i,size:u}}static parse(t,n){let[r,o]=function(e,t){switch(e[0]){case"Q":{let n=t??rn;return[rn.prefix,n.decode(`${rn.prefix}${e}`)]}case rn.prefix:{let n=t??rn;return[rn.prefix,n.decode(e)]}case tn.prefix:{let n=t??tn;return[tn.prefix,n.decode(e)]}case nn.prefix:{let n=t??nn;return[nn.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}(t,n),i=e.decode(o);if(0===i.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return In(i).set(r,t),i}};var Bn=112,Dn=18;function Nn(e,t,n){let r=Sn(e),o=r+Sn(t),i=new Uint8Array(o+n.byteLength);return Cn(e,i,0),Cn(t,i,r),i.set(n,o),i}var Pn=Symbol.for("@ipld/js-cid/CID");var Fn={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=On.asCID(e);if(!t)return null;let n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new Pe(Ne.tag,42),new Pe(Ne.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var _n={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};_n.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return On.decode(e.subarray(1))};_n.tags.slice();var Ln=e=>Vt(function(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}(e),_n),Rn=Ae(Ce(),1),Un=Ae(Ie(),1),Mn=(e,t,n,r)=>{if("length"===n||"prototype"===n||"arguments"===n||"caller"===n)return;let o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!jn(o,i)&&r||Object.defineProperty(e,n,i)},jn=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},$n=(e,t)=>`/* Wrapped ${e}*/\n${t}`,Hn=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),zn=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");function Vn(e,t,{ignoreNonConfigurable:n=!1}={}){let{name:r}=e;for(let o of Reflect.ownKeys(t))Mn(e,t,o,n);return((e,t)=>{let n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,t),((e,t,n)=>{let r=""===n?"":`with ${n.trim()}() `,o=$n.bind(null,r,t.toString());Object.defineProperty(o,"name",zn),Object.defineProperty(e,"toString",{...Hn,value:o})})(e,t,r),e}var Gn=new WeakMap;var Wn=On.parse("bafyreibm6gpmdrbbf27x4b473fenradnlc3zcussd3vfjy4nv7ta3uuyge"),qn=["https://trustless-gateway.link","https://ipfs.io","https://dweb.link"];async function Kn(e,t,n=1){try{let n=await async function(e,t){if("function"==typeof e)return e(t);if("function"==typeof e?.block?.get)return e.block.get(t);let n=Array.isArray(e)?e:[e];for(let o of n){let e=new URL(o);e.pathname=`/ipfs/${t.toString()}`,e.search="?format=raw";try{let t=await(0,Rn.default)(e,{headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"});if(!t.ok)throw t;return new Uint8Array(await t.arrayBuffer())}catch(r){throw new Error(`unable to fetch raw block for CID ${t}`,{cause:r})}}}(e,t);return{obj:await Ln(n),block:n}}catch(r){if(n<3)return await Kn(e,t,n+1);throw r}}var Zn=function(e,{cacheKey:t=([e])=>e,cache:n=new Map}={}){let r=new Map,o=function(...o){let i=t(o);if(r.has(i))return r.get(i);let s=(async()=>{try{if(n&&await n.has(i))return await n.get(i);let t=await e.apply(this,o);try{return t}finally{n&&await n.set(i,t)}}finally{r.delete(i)}})();return r.set(i,s),s};return Vn(o,e,{ignoreNonConfigurable:!0}),Gn.set(o,n),o}((async function(e,t,n){let r,o;try{({obj:r,block:o}=await Kn(e,t))}catch(s){throw({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REV:"007dbb1",REACT_APP_VERSION:"4.5.0"}?.DEBUG||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REV:"007dbb1",REACT_APP_VERSION:"4.5.0"}?.TEST)&&console.error(o?`[ipfs-geoip] failed to parse DAG-CBOR behind CID '${t}'`:`[ipfs-geoip] failed to get raw block for CID '${t}'`,s),s}let i=0;if(!("data"in r)){for(;r.mins[i]&&r.mins[i]<=n;)i++;let t=r.links[i-1];if(!t)throw new Error("Failed to lookup node");let o=function(e){return e?On.asCID(e):null}(t);if(!o)throw new Error("Failed to lookup node");return Zn(e,o,n)}if("data"in r){for(;r.data[i]&&r.data[i].min<=n;)i++;let e=r.data[i-1];if(!e)throw new Error("Failed to lookup leaf node");if(!e.data)throw new Error("Unmapped range");return function(e){return{country_name:e[0],country_code:e[1],region_code:e[2],city:e[3],postal_code:e[4],latitude:e[5],longitude:e[6],planet:"Earth"}}(e.data)}}),{cachePromiseRejection:!1,cacheKey:e=>{let[,t,n]=e;return`${t}.${n}`}});function Yn(e=qn,t){return Zn(e,Wn,Un.default.toLong(t))}var Jn=n(7283),Xn=n.n(Jn);class Qn extends Error{constructor(e){super(e),this.name="TimeoutError"}}class er extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const tr=e=>void 0===globalThis.DOMException?new er(e):new DOMException(e),nr=e=>{const t=void 0===e.reason?tr("This operation was aborted."):e.reason;return t instanceof Error?t:tr(t)};var rr,or=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};rr=new WeakMap;const ir=class{constructor(){rr.set(this,[])}enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&or(this,rr,"f")[this.size-1].priority>=t.priority)return void or(this,rr,"f").push(n);const r=function(e,t,n){let r=0,o=e.length;for(;o>0;){const i=Math.trunc(o/2);let s=r+i;n(e[s],t)<=0?(r=++s,o-=i+1):o=i}return r}(or(this,rr,"f"),n,((e,t)=>t.priority-e.priority));or(this,rr,"f").splice(r,0,n)}dequeue(){const e=or(this,rr,"f").shift();return null===e||void 0===e?void 0:e.run}filter(e){return or(this,rr,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return or(this,rr,"f").length}};var sr,ar,ur,lr,cr,fr,hr,dr,pr,gr,yr,mr,br,vr,wr,Er,Ar,Cr,Sr,Tr,kr,xr,Ir,Or,Br,Dr,Nr=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Pr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Fr extends Error{}class _r extends(Xn()){constructor(e){var t,n,r,o;if(super(),sr.add(this),ar.set(this,void 0),ur.set(this,void 0),lr.set(this,0),cr.set(this,void 0),fr.set(this,void 0),hr.set(this,0),dr.set(this,void 0),pr.set(this,void 0),gr.set(this,void 0),yr.set(this,void 0),mr.set(this,0),br.set(this,void 0),vr.set(this,void 0),wr.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:ir,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);Nr(this,ar,e.carryoverConcurrencyCount,"f"),Nr(this,ur,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),Nr(this,cr,e.intervalCap,"f"),Nr(this,fr,e.interval,"f"),Nr(this,gr,new e.queueClass,"f"),Nr(this,yr,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Nr(this,wr,!0===e.throwOnTimeout,"f"),Nr(this,vr,!1===e.autoStart,"f")}get concurrency(){return Pr(this,br,"f")}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Nr(this,br,e,"f"),Pr(this,sr,"m",Or).call(this)}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t={timeout:this.timeout,throwOnTimeout:Pr(this,wr,"f"),...t},new Promise(((n,r)=>{Pr(this,gr,"f").enqueue((async()=>{var o,i,s;Nr(this,mr,(i=Pr(this,mr,"f"),++i),"f"),Nr(this,lr,(s=Pr(this,lr,"f"),++s),"f");try{if(null===(o=t.signal)||void 0===o?void 0:o.aborted)throw new Fr("The task was aborted.");let r=e({signal:t.signal});t.timeout&&(r=function(e,t,n,r){let o;const i=new Promise(((i,s)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((r={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...r}).signal){const{signal:e}=r;e.aborted&&s(nr(e)),e.addEventListener("abort",(()=>{s(nr(e))}))}o=r.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof n){try{i(n())}catch(o){s(o)}return}const r=n instanceof Error?n:new Qn("string"===typeof n?n:`Promise timed out after ${t} milliseconds`);"function"===typeof e.cancel&&e.cancel(),s(r)}),t),(async()=>{try{i(await e)}catch(t){s(t)}finally{r.customTimers.clearTimeout.call(void 0,o)}})()}else i(e)}));return i.clear=()=>{clearTimeout(o),o=void 0},i}(Promise.resolve(r),t.timeout)),t.signal&&(r=Promise.race([r,Pr(this,sr,"m",Br).call(this,t.signal)]));const i=await r;n(i),this.emit("completed",i)}catch(a){if(a instanceof Qn&&!t.throwOnTimeout)return void n();r(a),this.emit("error",a)}finally{Pr(this,sr,"m",Cr).call(this)}}),t),this.emit("add"),Pr(this,sr,"m",kr).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return Pr(this,vr,"f")?(Nr(this,vr,!1,"f"),Pr(this,sr,"m",Or).call(this),this):this}pause(){Nr(this,vr,!0,"f")}clear(){Nr(this,gr,new(Pr(this,yr,"f")),"f")}async onEmpty(){0!==Pr(this,gr,"f").size&&await Pr(this,sr,"m",Dr).call(this,"empty")}async onSizeLessThan(e){Pr(this,gr,"f").size<e||await Pr(this,sr,"m",Dr).call(this,"next",(()=>Pr(this,gr,"f").size<e))}async onIdle(){0===Pr(this,mr,"f")&&0===Pr(this,gr,"f").size||await Pr(this,sr,"m",Dr).call(this,"idle")}get size(){return Pr(this,gr,"f").size}sizeBy(e){return Pr(this,gr,"f").filter(e).length}get pending(){return Pr(this,mr,"f")}get isPaused(){return Pr(this,vr,"f")}}ar=new WeakMap,ur=new WeakMap,lr=new WeakMap,cr=new WeakMap,fr=new WeakMap,hr=new WeakMap,dr=new WeakMap,pr=new WeakMap,gr=new WeakMap,yr=new WeakMap,mr=new WeakMap,br=new WeakMap,vr=new WeakMap,wr=new WeakMap,sr=new WeakSet,Er=function(){return Pr(this,ur,"f")||Pr(this,lr,"f")<Pr(this,cr,"f")},Ar=function(){return Pr(this,mr,"f")<Pr(this,br,"f")},Cr=function(){var e;Nr(this,mr,(e=Pr(this,mr,"f"),--e),"f"),Pr(this,sr,"m",kr).call(this),this.emit("next")},Sr=function(){Pr(this,sr,"m",Ir).call(this),Pr(this,sr,"m",xr).call(this),Nr(this,pr,void 0,"f")},Tr=function(){const e=Date.now();if(void 0===Pr(this,dr,"f")){const t=Pr(this,hr,"f")-e;if(!(t<0))return void 0===Pr(this,pr,"f")&&Nr(this,pr,setTimeout((()=>{Pr(this,sr,"m",Sr).call(this)}),t),"f"),!0;Nr(this,lr,Pr(this,ar,"f")?Pr(this,mr,"f"):0,"f")}return!1},kr=function(){if(0===Pr(this,gr,"f").size)return Pr(this,dr,"f")&&clearInterval(Pr(this,dr,"f")),Nr(this,dr,void 0,"f"),this.emit("empty"),0===Pr(this,mr,"f")&&this.emit("idle"),!1;if(!Pr(this,vr,"f")){const e=!Pr(this,sr,"a",Tr);if(Pr(this,sr,"a",Er)&&Pr(this,sr,"a",Ar)){const t=Pr(this,gr,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Pr(this,sr,"m",xr).call(this),!0)}}return!1},xr=function(){Pr(this,ur,"f")||void 0!==Pr(this,dr,"f")||(Nr(this,dr,setInterval((()=>{Pr(this,sr,"m",Ir).call(this)}),Pr(this,fr,"f")),"f"),Nr(this,hr,Date.now()+Pr(this,fr,"f"),"f"))},Ir=function(){0===Pr(this,lr,"f")&&0===Pr(this,mr,"f")&&Pr(this,dr,"f")&&(clearInterval(Pr(this,dr,"f")),Nr(this,dr,void 0,"f")),Nr(this,lr,Pr(this,ar,"f")?Pr(this,mr,"f"):0,"f"),Pr(this,sr,"m",Or).call(this)},Or=function(){for(;Pr(this,sr,"m",kr).call(this););},Br=async function(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(new Fr("The task was aborted."))}),{once:!0})}))},Dr=async function(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))};const Lr=_r;var Rr=n(101),Ur=n.n(Rr),Mr=n(7504),jr=n.n(Mr),$r=n(5649),Hr=n.n($r),zr=n(8330);const{El:Vr}=zr,Gr=Z().seconds(1),Wr=Vr["ipfs-geoip"];const qr=e=>4===e[0]&&"127.0.0.1"!==e[1],Kr=e=>{if(!e)return null;const{country_name:t,city:n}=e;return n&&t?`${t}, ${n}`:t},Zr=e=>e.protoNames().join(" \u2022 "),Yr=e=>{if("n/a"===e)return;let t=parseInt(e);return t="s"===/(s|ms)/.exec(e)[0]?1e3*t:t,t},Jr=Hr()((e=>{if(e)for(const n of e.addresses)try{const e=(0,ee.HZ)(n).nodeAddress();if((jr().isV4Format(e.address)||jr().isV6Format(e.address))&&!jr().isPrivate(e.address))return e.address}catch(t){}})),Xr=async(e,t)=>{const n=await Jr(t);let r,o=!1,i=!1;try{r=e.nodeAddress()}catch(s){return{isPrivate:o,isNearby:i}}return o=jr().isPrivate(r.address),n&&(jr().isV4Format(r.address)?i=jr().cidrSubnet(`${n}/24`).contains(r.address):jr().isV6Format(r.address)&&(i=jr().cidrSubnet(`${n}/48`).contains(r.address)&&!jr().cidrSubnet("fc00::/8").contains(r.address))),{isPrivate:o,isNearby:i}};class Qr{constructor(e){this.geoipCache=pe({name:"geoipCache",version:Wr,maxAge:Z().weeks(1),...e.cache}),this.failedAddrs=Ur()(500),this.queue=new Lr({concurrency:e.concurrency,autoStart:!0}),this.geoipLookupPromises=new Map,this.pass=0}async findLocations(e,t){const n={};e=(Array.isArray(e)?e:[e]).map((e=>e.replace(/localhost:(\d+)/,"127.0.0.1:$1")));for(const r of this.optimizedPeerSet(t)){const t=r.peer,o=r.addr.stringTuples().find(qr);if(!o)continue;const i=o[1];if(this.failedAddrs.has(i))continue;const s=await this.geoipCache.get(i);s?n[t]=s:this.geoipLookupPromises.has(i)||this.geoipLookupPromises.set(i,this.queue.add((async()=>{try{const t=await Yn(e,i);await this.geoipCache.set(i,t)}catch(t){this.failedAddrs.set(i,!0)}finally{this.geoipLookupPromises.delete(i)}})))}return n}optimizedPeerSet(e){if(this.pass<3){const t=e=>Yr(e.latency)||9999,n=e.concat().sort(((e,n)=>t(e)-t(n)));switch(this.pass=this.pass+1,this.pass-1){case 0:return n.slice(0,10);case 1:return n.slice(0,100);default:return n.slice(0,200)}}return e}}const eo=function(e){(e=e||{}).concurrency=e.concurrency||4,e.cache=e.cache||{};const t=new Qr(e),n=(0,H.re)({name:"peerLocations",actionBaseType:"PEER_LOCATIONS",getPromise:e=>{let{store:n}=e;return t.findLocations(n.selectAvailableGatewayUrl(),n.selectPeers())},staleAfter:Gr,retryAfter:Gr,persist:!1,checkIfOnline:!1});return n.reactPeerLocationsFetch=(0,H.Mz)("selectRouteInfo","selectPeerLocationsShouldUpdate","selectIpfsConnected",((e,t,n)=>{if("/peers"===e.url&&t&&n)return{actionCreator:"doFetchPeerLocations"}})),n.selectPeerLocationsForSwarm=(0,H.Mz)("selectPeers","selectPeerLocations","selectBootstrapPeers","selectIdentity",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>3?arguments[3]:void 0;return e&&Promise.all(e.map((async e=>{const r=e.peer,o=t?t[r]:null,i=Kr(o),s=o&&o.country_code,a=o&&[o.longitude,o.latitude],u=Zr(e.addr),l=e.addr.toString(),c=Yr(e.latency),f=e.direction,{isPrivate:h,isNearby:d}=await Xr(e.addr,n);return{peerId:r,location:i,flagCode:s,coordinates:a,connection:u,address:l,protocols:(Array.isArray(e.streams)?Array.from(new Set(e.streams.map((e=>e.Protocol)).map((e=>null!==e&&void 0!==e&&e.trim()?e:"[unnamed]")))).sort():[]).join(", "),direction:f,latency:c,isPrivate:h,isNearby:d}})))})),n.selectPeersCoordinates=(0,H.Mz)("selectPeerLocationsForSwarm",(async e=>{if(!e)return[];return(await e).reduce(((e,t)=>{let{peerId:n,coordinates:r}=t;if(!r)return e;let o=!1;const i=e.map((e=>{if(!e||o)return e;const[t,i]=e.coordinates,[s,a]=r;return t-4<=s&&t+4>=s&&(i-4<=a&&i+4>=a)&&(e.peerIds.push(n),o=!0),e}));return o?i:[...i,{peerIds:[n],coordinates:r}]}),[])})),n};var to=n(1388),no=n(6053),ro=n(2135),oo=n.n(ro),io=n(5982);const so=e=>e.split(":").at(-1),ao=e=>[...new Set(e)],uo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.every((t=>!t.some((t=>t===e))))},lo=(e,t)=>{if(e.length!==t.length)return t;return e.filter((e=>!t.includes(e))).length>0?t:e},co=async(e,t,n)=>{var r,o,i;const s=t.find((t=>e.endpoint.toString()===t.apiEndpoint.toString())),a=null===s||void 0===s?void 0:s.icon,u=null===s||void 0===s?void 0:s.visitServiceUrl,l={...e,name:e.service,icon:a,visitServiceUrl:u};if("invalid"===(null===e||void 0===e||null===(r=e.stat)||void 0===r?void 0:r.status))return{...l,numberOfPins:-1,online:!1};const c=null===(o=e.stat)||void 0===o||null===(i=o.pinCount)||void 0===i?void 0:i.pinned,f="number"===typeof c,h=f?await fo(e.service,n):void 0;return{...l,numberOfPins:c,online:f,autoUpload:h}},fo=Hr()((async(e,t)=>{try{return await t.config.get(`Pinning.RemoteServices.${e}.Policies.MFS.Enable`)}catch(r){var n;if(null!==(n=r.message)&&void 0!==n&&n.includes("key has no attribute"))try{return await t.config.get(`Pinning.RemoteServices["${e}"].Policies.MFS.Enable`)}catch(o){}console.error(`unexpected config.get error for "${e}": ${r.message}`)}return!1}),{maxAge:3e3}),ho=(e,t)=>{const n=(0,io.L)("remotesServicesBackoffs")||{},{service:r}=t,{lastTry:o,tryAfter:i}=n[r]||{lastTry:0,tryAfter:3e4};if(o+i>(new Date).getTime())throw new Error("still within back-off period");try{return e.pin.remote.ls(t)}catch(s){throw s.toString().includes("429 Too Many Requests")&&(n[r]={lastTry:(new Date).getTime(),tryAfter:3*i},(0,io.c)("remotesServicesBackoffs",n)),s}},po={name:"pinning",persistActions:["UPDATE_REMOTE_PINS","DISMISS_REMOTE_PINS","CANCEL_PENDING_PINS"],init:e=>{(e=>{const t=setInterval((()=>{e.selectIpfsReady()&&(clearTimeout(t),e.selectPendingPins().forEach((t=>{var n;const[r,o]=t.split(":");e.doSetPinning({cid:null!==(n=no.TO.asCID(o))&&void 0!==n?n:no.TO.parse(o)},[r],!1)})))}),1e3)})(e),(e=>{setInterval((()=>{const t=[...e.selectPendingPins(),...e.selectFailedPins()].map((e=>({cid:e.split(":")[1]})));e.doFetchRemotePins(t,!0)}),3e4)})(e)},reducer:(e,t)=>{var n,r,o,i,s,a,u,l,c;if("UPDATE_REMOTE_PINS"===t.type){const{adds:n=[],removals:r=[],pending:o=[],failed:i=[]}=t.payload,s=lo(e.remotePins,ao([...e.remotePins,...n].filter(uo(r,o,i)))),a=lo(e.notRemotePins,ao([...e.notRemotePins,...r].filter(uo(n,o,i)))),u=lo(e.pendingPins,ao([...e.pendingPins,...o].filter(uo(n,r,i)))),l=lo(e.failedPins,ao([...e.failedPins,...i].filter(uo(n,r,o)))),c=lo(e.completedPins,ao([...e.completedPins,...n].filter((t=>e.pendingPins.some((e=>e===t))))));return{...e,remotePins:s,notRemotePins:a,pendingPins:u,failedPins:l,completedPins:c}}if("DISMISS_REMOTE_PINS"===t.type){const{failed:n=[],completed:r=[]}=t.payload,o=e.failedPins.filter(uo(n)),i=e.completedPins.filter(uo(r));return{...e,failedPins:o,completedPins:i}}if("SET_LOCAL_PINS_STATS"===t.type){const{localPinsSize:n,localNumberOfPins:r}=t.payload;return{...e,localNumberOfPins:r,localPinsSize:n}}if("SET_REMOTE_PINNING_SERVICES"===t.type){const n=e.pinningServices,r=t.payload;if((null===n||void 0===n?void 0:n.length)===(null===r||void 0===r?void 0:r.length)){const t=e=>e&&"undefined"!==typeof e.numberOfPins,o=n.some(t),i=r.some(t);if(o&&!i)return e}return{...e,pinningServices:r}}return"SET_REMOTE_PINNING_SERVICES_AVAILABLE"===t.type?{...e,arePinningServicesSupported:t.payload}:{...e,pinningServices:null!==(n=null===e||void 0===e?void 0:e.pinningServices)&&void 0!==n?n:[],remotePins:null!==(r=null===e||void 0===e?void 0:e.remotePins)&&void 0!==r?r:[],pendingPins:null!==(o=null===e||void 0===e?void 0:e.pendingPins)&&void 0!==o?o:[],failedPins:null!==(i=null===e||void 0===e?void 0:e.failedPins)&&void 0!==i?i:[],completedPins:null!==(s=null===e||void 0===e?void 0:e.completedPins)&&void 0!==s?s:[],notRemotePins:null!==(a=null===e||void 0===e?void 0:e.notRemotePins)&&void 0!==a?a:[],localPinsSize:null!==(u=null===e||void 0===e?void 0:e.localPinsSize)&&void 0!==u?u:0,localNumberOfPins:null!==(l=null===e||void 0===e?void 0:e.localNumberOfPins)&&void 0!==l?l:0,arePinningServicesSupported:null!==(c=null===e||void 0===e?void 0:e.arePinningServicesSupported)&&void 0!==c&&c}},doFetchRemotePins:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async n=>{var r,o;let{dispatch:i,store:s,getIpfs:a}=n;const u=s.selectPinningServices();if(null===u||void 0===u||!u.length)return;const l=a();if(!l||null!==s&&void 0!==s&&null!==(r=s.ipfs)&&void 0!==r&&null!==(o=r.ipfs)&&void 0!==o&&o.ready||!l.pin.remote)return;const c=e?e.map((e=>e.cid.toString())):[],f=s.selectRemotePins(),h=s.selectNotRemotePins(),d=((e,t)=>{const n=[...new Set(e)],r=[];for(let o=0;o<n.length;o+=t){const e=n.slice(o,o+t);r.push(e)}return r})(c,10),p=[],g=[],y=[],m=[];await Promise.allSettled(u.map((async e=>{try{const r=t?new Set:new Set([...f,...h].filter((t=>t.startsWith(e.name))).map(so));for(const t of d){const o=t.filter((e=>!r.has(e.toString())));if(!o.length)continue;const i=new Set(o.map((e=>e.toString())));try{const t=ho(l,{service:e.name,cid:o.map((e=>{var t;return null!==(t=no.TO.asCID(e))&&void 0!==t?t:no.TO.parse(e)})),status:["queued","pinning","pinned","failed"]});for await(const n of t){const t=n.cid.toString();i.delete(t),"queued"===n.status||"pinning"===n.status?m.push(`${e.name}:${t}`):"failed"===n.status?y.push(`${e.name}:${t}`):p.push(`${e.name}:${t}`)}}catch(n){console.error(`Error: pin.remote.ls service=${e.name} cid=${o}: ${n.toString()}`)}for(const t of i)g.push(`${e.name}:${t}`)}}catch(n){console.error("unexpected error during doFetchRemotePins",n)}}))),i({type:"UPDATE_REMOTE_PINS",payload:{adds:p,removals:g,pending:m,failed:y}})}},selectRemotePins:e=>e.pinning.remotePins||[],selectNotRemotePins:e=>e.pinning.notRemotePins||[],selectPendingPins:e=>e.pinning.pendingPins||[],selectFailedPins:e=>e.pinning.failedPins||[],selectCompletedPins:e=>e.pinning.completedPins||[],selectLocalPinsSize:e=>e.pinning.localPinsSize,selectLocalNumberOfPins:e=>e.pinning.localNumberOfPins,doSelectRemotePinsForFile:e=>t=>{let{store:n}=t;const r=n.selectPinningServices().map((e=>e.name));return ao([...n.selectPendingPins(),...n.selectRemotePins()]).filter((t=>so(t)===e.cid.toString())).map((e=>e.split(":").at(0))).filter((e=>r.includes(e)))},doFetchLocalPinsStats:()=>async e=>{let{getIpfs:t,dispatch:n}=e;const r=t();if(!r)return null;n({type:"SET_LOCAL_PINS_STATS",payload:{localPinsSize:-1,localNumberOfPins:(await oo()(r.pin.ls({type:"recursive"}))).length}})},doFetchPinningServices:()=>async e=>{var t,n;let{getIpfs:r,store:o,dispatch:i}=e;const s=r();if(!s||null!==o&&void 0!==o&&null!==(t=o.ipfs)&&void 0!==t&&null!==(n=t.ipfs)&&void 0!==n&&n.ready||!s.pin.remote)return null;const a=(await s.commands()).Subcommands.find((e=>"pin"===e.Name)).Subcommands.some((e=>"remote"===e.Name));if(i({type:"SET_REMOTE_PINNING_SERVICES_AVAILABLE",payload:a}),!a)return null;const u=o.selectRemoteServiceTemplates(),l=await s.pin.remote.service.ls();i({type:"SET_REMOTE_PINNING_SERVICES",payload:await Promise.all(l.map((e=>co(e,u,s))))})},doFetchPinningServicesStats:()=>async e=>{var t,n;let{getIpfs:r,store:o,dispatch:i}=e;const s=r();if(!s||null!==o&&void 0!==o&&null!==(t=o.ipfs)&&void 0!==t&&null!==(n=t.ipfs)&&void 0!==n&&n.ready||!s.pin.remote)return null;if(!(await s.commands()).Subcommands.find((e=>"pin"===e.Name)).Subcommands.some((e=>"remote"===e.Name)))return null;const a=o.selectRemoteServiceTemplates(),u=await s.pin.remote.service.ls({stat:!0});i({type:"SET_REMOTE_PINNING_SERVICES",payload:await Promise.all(u.map((e=>co(e,a,s))))})},selectPinningServices:e=>e.pinning.pinningServices||[],selectRemoteServiceTemplates:()=>to.E,selectArePinningServicesSupported:e=>e.pinning.arePinningServicesSupported,selectPinningServicesDefaults:()=>to.E.reduce(((e,t)=>({...e,[t.name]:{...t,nickname:t.name}})),{}),doDismissCompletedPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{dispatch:n}=e;n({type:"DISMISS_REMOTE_PINS",payload:{completed:t}})}},doDismissFailedPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{dispatch:n}=e;n({type:"DISMISS_REMOTE_PINS",payload:{failed:t}})}},doCancelPendingPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{getIpfs:n,dispatch:r}=e;const o=n();for(const s of t){var i;const[e,t]=s.split(":");await o.pin.remote.rm({cid:[null!==(i=no.TO.asCID(t))&&void 0!==i?i:no.TO.parse(t)],service:e})}r({type:"UPDATE_REMOTE_PINS",payload:{removals:t}})}},doSetPinning:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return async o=>{let{getIpfs:i,store:s,dispatch:a}=o;const u=i(),{cid:l,name:c}=e,f=t.includes("local");if(n!==f)try{const e={serviceName:"Local node"};f?(await u.pin.add(l),a({type:"IPFS_PIN_SUCCEED",msgArgs:e})):(await u.pin.rm(l),a({type:"IPFS_UNPIN_SUCCEED",msgArgs:e}))}catch(g){console.error(`unexpected local pin error for ${l} (${c})`,g);const e={serviceName:"local",errorMsg:g.toString()};a({type:"IPFS_PIN_FAILED",msgArgs:e})}const h=[],d=[],p=[];s.selectPinningServices().forEach((async e=>{const n=t.includes(e.name);if(r.includes(e.name)===n)return;const o=`${e.name}:${l}`;try{const t={serviceName:e.name};n?(h.push(o),await u.pin.remote.add(l,{service:e.name,name:c,background:!0}),a({type:"IPFS_PIN_SUCCEED",msgArgs:t})):(p.push(o),await u.pin.remote.rm({cid:[l],service:e.name}),a({type:"IPFS_UNPIN_SUCCEED",msgArgs:t}))}catch(g){console.error(`ipfs.pin.remote error for ${l}@${e.name}`,g);const n={serviceName:e.name,errorMsg:g.toString()};d.push(o),a({type:"IPFS_PIN_FAILED",msgArgs:n})}})),a({type:"UPDATE_REMOTE_PINS",payload:{adds:[],removals:p,pending:h,failed:d}}),await s.doPinsFetch()}},doAddPinningService:e=>{let{apiEndpoint:t,nickname:n,secretApiKey:r}=e;return async e=>{let{getIpfs:o}=e;const i=o();n=n.replaceAll(".","_"),await i.pin.remote.service.add(n,{endpoint:t,key:r})}},doRemovePinningService:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.pin.remote.service.rm(e),r.doFetchPinningServices()},doSetAutoUploadForService:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n(),i=`Pinning.RemoteServices.${e}.Policies.MFS.Enable`,s=await o.config.get(i);await o.config.set(i,!s),r.doFetchPinningServices()}};var go=n(644),yo=n(5285),mo=n(2720),bo=n(8298),vo=n(219),wo=n.n(vo);function Eo(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}var Ao=e.createContext();var Co={initialChunks:{}},So="PENDING",To="REJECTED";var ko=function(e){return e};function xo(t){var n=t.defaultResolveComponent,r=void 0===n?ko:n,o=t.render,i=t.onLoad;function s(t,n){void 0===n&&(n={});var s=function(e){return"function"===typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(t),a={};function u(e){return n.cacheKey?n.cacheKey(e):s.resolve?s.resolve(e):"static"}function l(e,t,o){var i=n.resolveComponent?n.resolveComponent(e,t):r(e);return wo()(o,i,{preload:!0}),i}var c=function(e){var t=u(e),n=a[t];return n&&n.status!==To||((n=s.requireAsync(e)).status=So,a[t]=n,n.then((function(){n.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:s.resolve(e),chunkName:s.chunkName(e),error:t?t.message:t}),n.status=To}))),n},f=function(t){var n=function(n){return e.createElement(Ao.Consumer,null,(function(r){return e.createElement(t,Object.assign({__chunkExtractor:r},n))}))};return t.displayName&&(n.displayName=t.displayName+"WithChunkExtractor"),n}(function(e){function t(t){var r;return(r=e.call(this,t)||this).state={result:null,error:null,loading:!0,cacheKey:u(t)},Eo(!t.__chunkExtractor||s.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),t.__chunkExtractor?(!1===n.ssr||(s.requireAsync(t).catch((function(){return null})),r.loadSync(),t.__chunkExtractor.addChunk(s.chunkName(t))),(0,mo.A)(r)):(!1!==n.ssr&&(s.isReady&&s.isReady(t)||s.chunkName&&Co.initialChunks[s.chunkName(t)])&&r.loadSync(),r)}(0,bo.A)(t,e),t.getDerivedStateFromProps=function(e,t){var n=u(e);return(0,yo.A)({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===To&&this.setCache(),this.state.loading&&this.loadAsync()},r.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},r.componentWillUnmount=function(){this.mounted=!1},r.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},r.getCacheKey=function(){return u(this.props)},r.getCache=function(){return a[this.getCacheKey()]},r.setCache=function(e){void 0===e&&(e=void 0),a[this.getCacheKey()]=e},r.triggerOnLoad=function(){var e=this;i&&setTimeout((function(){i(e.state.result,e.props)}))},r.loadSync=function(){if(this.state.loading)try{var e=l(s.requireSync(this.props),this.props,h);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:s.resolve(this.props),chunkName:s.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},r.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=l(t,e.props,h);e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},r.resolveAsync=function(){var e=this.props,t=(e.__chunkExtractor,e.forwardedRef,(0,go.A)(e,["__chunkExtractor","forwardedRef"]));return c(t)},r.render=function(){var e=this.props,t=e.forwardedRef,r=e.fallback,i=(e.__chunkExtractor,(0,go.A)(e,["forwardedRef","fallback","__chunkExtractor"])),s=this.state,a=s.error,u=s.loading,l=s.result;if(n.suspense&&(this.getCache()||this.loadAsync()).status===So)throw this.loadAsync();if(a)throw a;var c=r||n.fallback||null;return u?c:o({fallback:c,result:l,options:n,props:(0,yo.A)({},i,{ref:t})})},t}(e.Component)),h=e.forwardRef((function(t,n){return e.createElement(f,Object.assign({forwardedRef:n},t))}));return h.displayName="Loadable",h.preload=function(e){h.load(e)},h.load=function(e){return c(e)},h}return{loadable:s,lazy:function(e,t){return s(e,(0,yo.A)({},t,{suspense:!0}))}}}var Io=xo({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(t){var n=t.result,r=t.props;return e.createElement(n,r)}}),Oo=Io.loadable,Bo=Io.lazy,Do=xo({onLoad:function(e,t){e&&t.forwardedRef&&("function"===typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),No=Do.loadable,Po=Do.lazy;var Fo=Oo;Fo.lib=No,Bo.lib=Po;const _o=Fo,Lo=_o((()=>Promise.all([n.e(139),n.e(435)]).then(n.bind(n,3435))),{fallback:e.createElement(x.A,null)}),Ro=_o((()=>Promise.all([n.e(868),n.e(523),n.e(257)]).then(n.bind(n,3257))),{fallback:e.createElement(x.A,null)}),Uo=_o((()=>n.e(904).then(n.bind(n,5904))),{fallback:e.createElement(x.A,null)}),Mo=_o((()=>Promise.all([n.e(868),n.e(124),n.e(853)]).then(n.bind(n,3853))),{fallback:e.createElement(x.A,null)}),jo=_o((()=>Promise.all([n.e(868),n.e(996),n.e(380)]).then(n.bind(n,7380))),{fallback:e.createElement(x.A,null)});var $o=n(930),Ho=n(8535),zo=n(91),Vo=n(9858);const Go=(0,a.CI)("settings")((t=>{let{t:n}=t;return e.createElement("div",{"data-id":"AnalyticsPage",className:"mw9 center"},e.createElement($o.mg,null,e.createElement("title",null,n("title")," | IPFS")),e.createElement(zo.A,null,e.createElement(Ho.A,null,n("analytics")),e.createElement(Vo.A,{t:n,open:!0})))})),Wo=_o((()=>n.e(984).then(n.bind(n,4984))),{fallback:e.createElement(x.A,null)}),qo=()=>e.createElement("div",{"data-id":"BlankPage"}),Ko=_o((()=>Promise.all([n.e(603),n.e(325)]).then(n.bind(n,8325))),{fallback:e.createElement(x.A,null)}),Zo=_o((()=>Promise.all([n.e(603),n.e(504)]).then(n.bind(n,2504))),{fallback:e.createElement(x.A,null)}),Yo=(0,r.N)("selectRouteInfo",(t=>{let{routeInfo:n}=t;const{pattern:r,url:o}=n,{setExplorePath:i}=(0,L.Nh)(),{doInitHelia:s,helia:a}=(0,L.pP)();return(0,e.useEffect)((()=>{null==a&&s()}),[a]),(0,e.useEffect)((()=>{i(window.location.hash)}),[o]),"/explore"===r?e.createElement(Zo,null):e.createElement(Ko,null)})),Jo=(0,H.iF)({"/explore":Yo,"/explore*":Yo,"/files*":Ro,"/ipfs*":Ro,"/ipns*":Ro,"/pins*":Uo,"/peers":Mo,"/settings/analytics":Go,"/settings*":jo,"/welcome":Wo,"/blank":qo,"/status*":Lo,"/":Lo,"":Lo},{routeInfoSelector:"selectHash"}),Xo={name:"redirects",reactToEmptyHash:(0,H.Mz)("selectHash",(e=>{if(""===e)return{actionCreator:"doUpdateHash",args:["#/"]}})),reactToIpfsConnectionFail:(0,H.Mz)("selectIpfsInitFailed","selectHash",((e,t)=>{if(e&&"/welcome"!==t&&!t.startsWith("/settings"))return{actionCreator:"doUpdateHash",args:["#/welcome"]}}))};var Qo=n(1184);function ei(e){let t;try{t=(0,ee.WH)("sni").code}catch(n){return null}for(const[r,o]of e)if(r===t&&void 0!==o)return o;return null}function ti(e){return e.some((([e,t])=>e===(0,ee.WH)("tls").code))}function ni(e,t,n){const r=ri[(0,ee.WH)(e).name];if(void 0===r)throw new Error(`Can't interpret protocol ${(0,ee.WH)(e).name}`);const o=r(t,n);return e===(0,ee.WH)("ip6").code?`[${o}]`:o}const ri={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`tcp://${ni(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`udp://${ni(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${ni(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${ni(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=ti(t),r=ei(t);if(n&&null!==r)return`https://${r}`;const o=n?"https://":"http://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=ni(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},tls:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return ni(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return ni(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=ni(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=ti(t),r=ei(t);if(n&&null!==r)return`wss://${r}`;const o=n?"wss://":"ws://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=ni(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},wss:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=ni(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${ni(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${ni(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${ni(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};var oi=n(6382).Buffer;const ii=["127.0.0.1","[::1]","0.0.0.0","[::]"],si=(0,H.re)({name:"config",staleAfter:6e4,persist:!1,checkIfOnline:!1,getPromise:async e=>{let{getIpfs:t,store:n}=e;const r=await t().config.getAll();let o;o=oi.isBuffer(r)?r.toString():JSON.stringify(r,null,"\t");const i=JSON.parse(o),s=n.selectPublicGateway(),a=ai("Gateway",i)||s,u=new URL(a);if(ii.includes(u.hostname)){u.hostname="localhost";const e=u.toString().replace(/\/+$/,"");if(await li(e))return n.doSetAvailableGateway(e),o}return await ui(a)||n.doSetAvailableGateway(s),o}});function ai(e,t){if(!t)return null;try{const n=function(e,t){const n=(0,ee.HZ)(e).stringTuples(),r=n.pop();if(void 0===r)throw new Error("Unexpected end of multiaddr");const o=(0,ee.WH)(r[0]),i=ri[o.name];if(null==i)throw new Error(`No interpreter found for ${o.name}`);let s=i(r[1]??"",n);return!1!==t?.assumeHttp&&r[0]===(0,ee.WH)("tcp").code&&(s=s.replace("tcp://","http://"),"443"!==r[1]&&"80"!==r[1]||("443"===r[1]&&(s=s.replace("http://","https://")),s=s.substring(0,s.lastIndexOf(":")))),s}((Array.isArray(t.Addresses[e])?t.Addresses[e][0]:t.Addresses[e]).replace(/\/0\.0\.0\.0\//,"/127.0.0.1/").replace(/\/::\//,"/::1/"),{assumeHttp:!0});if(0===new URL(n).port)throw Error("port set to 0, not deterministic");return n}catch(n){return console.log(`Failed to get url from config at Addresses.${e}`,n),null}}si.selectConfigObject=(0,H.Mz)("selectConfig",(e=>JSON.parse(e))),si.selectApiUrl=(0,H.Mz)("selectConfigObject","selectPublicGateway",((e,t)=>ai("API",e)||t)),si.selectGatewayUrl=(0,H.Mz)("selectConfigObject","selectPublicGateway",((e,t)=>ai("Gateway",e)||t)),si.selectAvailableGatewayUrl=(0,H.Mz)("selectAvailableGateway","selectGatewayUrl",((e,t)=>e||t)),si.selectBootstrapPeers=(0,H.Mz)("selectConfigObject",(e=>e&&e.Bootstrap)),si.reactConfigFetch=(0,H.Mz)("selectConfigShouldUpdate","selectIpfsReady",((e,t)=>{if(e&&t)return{actionCreator:"doFetchConfig"}}));const ui=Hr()((async e=>{try{const{status:t}=await fetch(`${e}/ipfs/bafkqae2xmvwgg33nmuqhi3zajfiemuzahiwss`);return 200===t}catch(t){return console.error(`Unable to use the gateway at ${e}. The public gateway will be used as a fallback`,t),!1}})),li=Hr()((async e=>{try{(e=new URL(e)).hostname=`bafkqae2xmvwgg33nmuqhi3zajfiemuzahiwss.ipfs.${e.hostname}`;const{status:t}=await fetch(e.toString());return 200===t}catch(t){return console.error(`Unable to use the subdomain gateway at ${e}. Regular gateway will be used as a fallback`,t),!1}})),ci=si;var fi=n(2742),hi=n(9156);const di={doSaveConfig:e=>async t=>{let{store:n}=t;n.selectConfigIsSaving()?console.log("doSaveConfig skipped, config save already in progress"):await n.doPerformSaveConfig(e)},doPerformSaveConfig:e=>(0,hi.y)("CONFIG_SAVE",(async t=>{const n=await pi((async()=>{const n=JSON.parse(e),r=t.getIpfs();if(null==r)throw Error("IPFS node is not found");await r.config.replace(n)}));if(!n.ok)throw n.error;await t.store.doMarkConfigAsOutdated()}))},pi=async e=>{try{return{ok:!0,value:await e()}}catch(t){return{ok:!1,error:t}}},gi=fi.H(["CONFIG_SAVE"]),yi={name:"config_save",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSaving:!1},t=arguments.length>1?arguments[1]:void 0;if(t.type===gi.CONFIG_SAVE){const{task:n}=t;switch(n.status){case"Init":return{...e,isSaving:!0};case"Exit":{const{result:t}=n;if(t.ok)return{...e,isSaving:!1,lastSuccess:Date.now()};{const{error:n}=t,r=n&&n.message||String(n);return{...e,isSaving:!1,lastError:Date.now(),errorMessage:r}}}default:return e}}return e},selectConfigIsSaving:e=>e.config_save.isSaving,selectConfigSaveLastSuccess:e=>e.config_save.lastSuccess,selectConfigSaveLastError:e=>e.config_save.lastError,...di};var mi=n(5094),bi=n.n(mi);const vi={name:"tours",init:e=>{bi().localStorage.getItem("tourTooltip")&&e.doDisableTooltip()},reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!1,tooltip:!0},t=arguments.length>1?arguments[1]:void 0;return"TOURS_ENABLE"===t.type?{...e,enabled:!0}:"TOURS_DISABLE"===t.type?{...e,enabled:!1}:"TOURS_TOOLTIP_DISABLE"===t.type?{...e,tooltip:!1}:e},doDisableTooltip:()=>e=>{let{dispatch:t}=e;bi().localStorage.setItem("tourTooltip",!1),t({type:"TOURS_TOOLTIP_DISABLE"})},doEnableTours:()=>e=>{let{dispatch:t}=e;t({type:"TOURS_ENABLE"})},doDisableTours:()=>e=>{let{dispatch:t}=e;t({type:"TOURS_DISABLE"})},selectTours:e=>e.tours,selectToursEnabled:e=>e.tours.enabled,selectShowTooltip:e=>e.tours.tooltip},wi=fi.H(["EXPERIMENTS_TOGGLE","EXPERIMENTS_UPDATE_STATE"]),Ei=[],Ai=(e,t)=>({...e,[t]:{...e[t],blocked:!1}}),Ci={selectExperimentsState:e=>e.experiments,selectExperiments:(0,H.Mz)("selectExperimentsState",(e=>Ei.map((t=>({...t,...e[t.key]})))))},Si={doExpToggleAction:e=>t=>{let{dispatch:n}=t;e&&n({type:wi.EXPERIMENTS_TOGGLE,task:{status:"Init",id:Symbol(wi.EXPERIMENTS_TOGGLE),init:{key:e}}})}},Ti={name:"experiments",persistActions:[wi.EXPERIMENTS_TOGGLE,wi.EXPERIMENTS_UPDATE_STATE],reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wi.EXPERIMENTS_TOGGLE:{const{task:n}=t;switch(n.status){case"Init":return((e,t)=>({...e,[t]:{...e[t],blocked:!0}}))(e,n.init.key);case"Exit":{const{result:t}=n;return t.ok?((e,t)=>Ai({...e,[t]:{...e[t],enabled:!(e&&e[t]&&e[t].enabled)}},t))(e,t.value.key):Ai(e,t.error.key)}default:return e}}case wi.EXPERIMENTS_UPDATE_STATE:return((e,t)=>Object.keys(t).reduce(((n,r)=>({...n,[r]:{...e[r],...t[r]}})),e))(e,t.payload);default:return e}},...Ci,...Si},ki={show:!1,error:!1,eventId:null,code:null},xi={name:"notify",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ki,t=arguments.length>1?arguments[1]:void 0;return"NOTIFY_DISMISSED"===t.type?{...e,show:!1}:"STATS_FETCH_FAILED"===t.type?{...e,show:!0,error:!0,eventId:t.type}:t.type.match(/^FILES_\w+_FAILED$/)?{...e,show:!0,error:!0,eventId:"FILES_EVENT_FAILED",code:t.payload.error.code}:"STATS_FETCH_FINISHED"===t.type&&"STATS_FETCH_FAILED"===e.eventId?{...e,error:!1,eventId:"STATS_FETCH_FINISHED",lastSuccess:Date.now()}:"SWARM_CONNECT_FAILED"===t.type||"SWARM_CONNECT_FINISHED"===t.type?{...e,show:!0,error:"SWARM_CONNECT_FAILED"===t.type,eventId:t.type}:t.type===wi.EXP_TOGGLE_FAILED?{...e,show:!0,error:!0,eventId:`experimentsErrors.${t.payload.key}`}:"IPFS_PIN_FAILED"===t.type?{...e,show:!0,error:!0,msgArgs:t.msgArgs,eventId:t.type}:"IPFS_PIN_SUCCEED"===t.type||"IPFS_UNPIN_SUCCEED"===t.type?{...e,show:!0,error:!1,msgArgs:t.msgArgs,eventId:t.type}:"IPFS_CONNECT_FAILED"===t.type?{...e,show:!0,error:!0,eventId:t.type}:"IPFS_CONNECT_SUCCEED"===t.type?{...e,show:!0,error:!1,eventId:t.type}:"IPFS_API_ADDRESS_INVALID"===t.type?{...e,show:!0,error:!0,eventId:t.type}:e},selectNotify:e=>e.notify,selectNotifyI18nKey:(0,H.Mz)("selectNotify","selectIpfsProvider",((e,t)=>{const{eventId:n,code:r}=e;if("STATS_FETCH_FAILED"===n)return"ipfsApiRequestFailed";if("IPFS_CONNECT_FAILED"===n)return"ipfsConnectFail";if("IPFS_CONNECT_SUCCEED"===n)return"ipfsConnectSuccess";if("IPFS_API_ADDRESS_INVALID"===n)return"ipfsInvalidApiAddress";if("IPFS_PIN_FAILED"===n)return"ipfsPinFailReason";if("IPFS_PIN_SUCCEED"===n)return"ipfsPinSucceedReason";if("IPFS_UNPIN_SUCCEED"===n)return"ipfsUnpinSucceedReason";if("FILES_EVENT_FAILED"===n){switch(r?r.replace(/^(ERR_)/,""):""){case"FOLDER_EXISTS":return"folderExists";case Qo.kl.WRITE:case Qo.kl.ADD_BY_PATH:case"API_RESPONSE":return"filesAddFailed";case Qo.kl.FETCH:return"filesFetchFailed";case Qo.kl.MOVE:return"filesRenameFailed";case Qo.kl.MAKE_DIR:return"filesMakeDirFailed";case Qo.kl.COPY:return"filesCopyFailed";case Qo.kl.DELETE:return"filesRemoveFailed";default:return"filesEventFailed"}}return"STATS_FETCH_FINISHED"===n?"ipfsIsBack":"SWARM_CONNECT_FAILED"===n?"couldntConnectToPeer":"SWARM_CONNECT_FINISHED"===n?"connectedToPeer":n})),doNotifyDismiss:()=>e=>{let{dispatch:t}=e;return t({type:"NOTIFY_DISMISSED"})},reactNotifyOkDismiss:(0,H.Mz)("selectAppTime","selectNotify",((e,t)=>{if("STATS_FETCH_FINISHED"===t.eventId&&t.show&&e-t.lastSuccess>3e3)return{type:"NOTIFY_DISMISSED"}}))},Ii={name:"connected",reducer:(e,t)=>{switch(e=e||{lastError:0,isNodeInfoOpen:!1},t.type){case"STATS_FETCH_FAILED":return{...e,lastError:Date.now()};case"NODE_INFO_OPEN":return{...e,isNodeInfoOpen:t.payload};default:return e}},doSetIsNodeInfoOpen:e=>t=>{let{dispatch:n}=t;return n({type:"NODE_INFO_OPEN",payload:e})},...{selectConnectedLastError:e=>e.connected.lastError,selectIpfsConnected:(0,H.Mz)("selectIpfsReady","selectNodeBandwidthLastSuccess","selectNodeBandwidthLastError",((e,t,n)=>e&&null!=t&&t>n)),selectIsNodeInfoOpen:e=>e.connected.isNodeInfoOpen}},Oi={name:"retryInit",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RETRY_INIT_DISABLE":return{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1,needToRetry:!1};case z.kl.IPFS_INIT:{const{task:n}=t;switch(n.status){case"Init":{const t=Date.now();return{...e,currentlyTrying:!0,startedAt:t,tryCount:(e.tryCount||0)+1}}case"Exit":if(n.result.ok)return{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1,needToRetry:!1};{const t=Date.now();return{...e,failedAt:t,currentlyTrying:!1}}default:return e}}default:return e}},doDisableRetryInit:()=>e=>{e.dispatch({type:"RETRY_INIT_DISABLE"})},selectRetryInitState:e=>e.retryInit,reactConnectionInitRetry:(0,H.Mz)("selectAppTime","selectIpfsReady","selectRetryInitState",((e,t,n)=>{let{failedAt:r,tryCount:o,needToRetry:i,currentlyTrying:s}=n;return!s&&(!!e&&(!!i&&(null!=o&&o>5||t?{actionCreator:"doDisableRetryInit"}:!(!r||e-r<2500)&&{actionCreator:"doTryInitIpfs"})))}))},Bi=(0,H.re)({name:"identity",actionBaseType:"IDENTITY",getPromise:e=>{let{getIpfs:t}=e;return t().id().catch((e=>{console.error("Failed to get identity",e)}))},staleAfter:1/0,persist:!1,checkIfOnline:!1});Bi.selectIdentityLastSuccess=e=>e.identity.lastSuccess,Bi.reactIdentityFetch=(0,H.Mz)("selectIpfsConnected","selectIdentityIsLoading","selectIdentityLastSuccess","selectConnectedLastError",((e,t,n,r)=>{if(e&&!t&&(!n||r>n))return{actionCreator:"doFetchIdentity"}}));const Di=Bi,Ni=pe({name:"bundle-cache",version:1,maxAge:1/0}),Pi=window,Fi={selectIsIpfsDesktop:()=>!!Pi.ipfsDesktop,selectDesktopCountlyActions:()=>[]},_i={...Fi,selectDesktopVersion:()=>{var e;return null===(e=Pi.ipfsDesktop)||void 0===e?void 0:e.version},selectDesktopCountlyDeviceId:()=>{var e;return null===(e=Pi.ipfsDesktop)||void 0===e?void 0:e.countlyDeviceId},selectDesktopCountlyActions:()=>{var e;return null===(e=Pi.ipfsDesktop)||void 0===e?void 0:e.countlyActions}},Li={doDesktopAddConsent:e=>()=>{var t;return null===(t=Pi.ipfsDesktop)||void 0===t?void 0:t.addConsent(e)},doDesktopRemoveConsent:e=>()=>{var t;return null===(t=Pi.ipfsDesktop)||void 0===t?void 0:t.removeConsent(e)},doDesktopUpdateLanguage:e=>()=>{var t;return null===(t=Pi.ipfsDesktop)||void 0===t?void 0:t.updateLanguage(e)}},Ri={name:"ipfsDesktop",reducer:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},...Pi.ipfsDesktop?_i:Fi,...Pi.ipfsDesktop?Li:{}},Ui=(0,H.re)({name:"repoStats",getPromise:async e=>{let{getIpfs:t}=e;return t().repo.stat()},staleAfter:6e4,persist:!1,checkIfOnline:!1});Ui.selectRepoSize=(0,H.Mz)("selectRepoStats",(e=>{if(e&&e.repoSize)return e.repoSize.toString()})),Ui.selectRepoNumObjects=(0,H.Mz)("selectRepoStats",(e=>{if(e&&e.numObjects)return e.numObjects.toString()})),Ui.reactRepoStatsFetch=(0,H.Mz)("selectRepoStatsShouldUpdate","selectIpfsReady",((e,t)=>{if(e&&t)return{actionCreator:"doFetchRepoStats"}}));const Mi=Ui;var ji=n(3724),$i=n(2333);const Hi=/webui[-.]ipfs/,zi=/(?:localhost|127.0.0.1)/,Vi=/ipfs/;function Gi(e){if("function"===typeof e)return!0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])throw new TypeError("Expected a function");return!1}function Wi(e){if("number"===typeof e)return!0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])throw new TypeError("Expected a number");return!1}const qi=!0,Ki=fi.H(["DESKTOP_SETTING_TOGGLE"]),Zi=fi.H(["ANALYTICS_ENABLED","ANALYTICS_DISABLED","ANALYTICS_ADD_CONSENT","ANALYTICS_REMOVE_CONSENT","SET_SHOW_ANALYTICS_BANNER"]),Yi=[z.kl.IPFS_INIT,gi.CONFIG_SAVE,$i.kl.MAKE_DIR,$i.kl.WRITE,$i.kl.ADD_BY_PATH,$i.kl.MOVE,$i.kl.DELETE,$i.kl.DOWNLOAD_LINK,wi.EXPERIMENTS_TOGGLE,Ki.DESKTOP_SETTING_TOGGLE];async function Ji(){var e;if(null!==(e=bi().ipfsDesktop)&&void 0!==e&&e.countlyAppKey)return bi().ipfsDesktop.countlyAppKey;return"kubo"===await async function(){const{origin:e}=globalThis.location;if(Hi.test(e))return zi.test(e)?"local":"webui.ipfs";try{const e=await fetch("/webui",{method:"HEAD"}),{pathname:t}=new URL(e.url);if(e.redirected&&Vi.test(t))return"kubo"}catch{}return zi.test(e)?"local":"webui.ipfs"}()?"c4524cc93fed92a5838d4ea27c5a65526b4e7558":"8fa213e6049bff23b08e5f5fbac89e7c27397612"}const Xi={all:["sessions","events","views","location","crashes"],safe:["sessions","events","views","location"]};function Qi(e,t){bi().Countly.q.push(["add_consent",e]),t.selectIsIpfsDesktop()&&t.doDesktopAddConsent(e)}function es(e,t){bi().Countly.q.push(["remove_consent",e]),t.selectIsIpfsDesktop()&&t.doDesktopRemoveConsent(e)}function ts(e){let{id:t,duration:n}=e;bi().Countly.q.push(["add_event",{key:t,count:1,dur:n}])}const ns=new Map([["IPFS_INIT_FAILED",(rs=ts,os=5,Gi(rs)&&Wi(os),((e,t)=>{Gi(e)&&Wi(t);let n=0;return function(){if(n++,n>=t)return e(...arguments)}})((e=>{Gi(e);let t,n=!1;return function(){return n||(t=e(...arguments),n=!0),t}})(rs),os))]]);var rs,os;const is={selectAnalytics:e=>e.analytics,selectAnalyticsConsent:e=>e.analytics.consent,selectAnalyticsEnabled:e=>e.analytics.consent.length>0,selectAnalyticsOptedOutPriorToDefaultOptIn:e=>!e.analytics.optedOut&&0===e.analytics.consent.length&&e.analytics.lastDisabledAt>e.analytics.lastEnabledAt,selectAnalyticsOptedOut:e=>e.analytics.optedOut,selectShowAnalyticsComponents:e=>e.analytics.showAnalyticsComponents,selectShowAnalyticsBanner:e=>e.analytics.showAnalyticsBanner,selectAnalyticsActionsToRecord:(0,H.Mz)("selectIsIpfsDesktop","selectDesktopCountlyActions",((e,t)=>e?t.concat(Yi).sort():Array.from(Yi).sort()))},ss={doToggleAnalytics:()=>e=>{let{store:t}=e;!t.selectAnalyticsEnabled()?t.doEnableAnalytics():t.doDisableAnalytics()},doDisableAnalytics:()=>e=>{let{dispatch:t,store:n}=e;bi().Countly.opt_out(),es(Xi.all,n),t({type:"ANALYTICS_DISABLED",payload:{consent:[]}})},doEnableAnalytics:()=>e=>{let{dispatch:t,store:n}=e;es(Xi.all,n),bi().Countly.opt_in(),Qi(Xi.safe,n),t({type:"ANALYTICS_ENABLED",payload:{consent:Xi.safe}})},doToggleConsent:e=>t=>{let{store:n}=t;n.selectAnalyticsConsent().includes(e)?n.doRemoveConsent(e):n.doAddConsent(e)},doRemoveConsent:e=>t=>{let{dispatch:n,store:r}=t;0===r.selectAnalyticsConsent().filter((t=>t!==e)).length&&bi().Countly.opt_out(),es(e,r),n({type:"ANALYTICS_REMOVE_CONSENT",payload:{name:e}})},doAddConsent:e=>t=>{let{dispatch:n,store:r}=t;0===r.selectAnalyticsConsent().length&&bi().Countly.opt_in(),Qi(e,r),n({type:"ANALYTICS_ADD_CONSENT",payload:{name:e}})},doToggleShowAnalyticsBanner:e=>t=>{let{dispatch:n}=t;n({type:"SET_SHOW_ANALYTICS_BANNER",payload:{shouldShow:e}})}},as=e=>{switch(e.type){case $i.kl.MAKE_DIR:case $i.kl.WRITE:case $i.kl.ADD_BY_PATH:case $i.kl.MOVE:case $i.kl.DELETE:case $i.kl.DOWNLOAD_LINK:case z.kl.IPFS_INIT:case gi.CONFIG_SAVE:return us(e.task,e.type);case wi.EXPERIMENTS_TOGGLE:return ls(e.task,"EXPERIMENTS");case Ki.DESKTOP_SETTING_TOGGLE:return ls(e.task,"DESKTOP_SETTING");default:return null}},us=(e,t)=>{if("Exit"===e.status){const{duration:n,result:r}=e;return{id:r.ok?t:`${t}_FAILED`,duration:n,error:r.ok?null:r.error}}return null},ls=(e,t)=>{if("Exit"===e.status){const{result:n,duration:r}=e,{key:o}=n.ok?n.value:n.error,i=n.ok?null:n.error,s=n.ok?n.value.value?"ENABLED":"DISABLED":"FAILED";return{id:`${t}_${ji.constantCase(o)}_${s}`,duration:r,error:i}}return null},cs=e=>{let{countlyUrl:t="https://countly.ipfs.tech",appVersion:r="4.5.0",appGitRevision:o="007dbb1",debug:i=!1}=e;return{name:"analytics",persistActions:[Zi.ANALYTICS_ENABLED,Zi.ANALYTICS_DISABLED,Zi.ANALYTICS_DISABLED,Zi.ANALYTICS_ADD_CONSENT,Zi.ANALYTICS_REMOVE_CONSENT,Zi.SET_SHOW_ANALYTICS_BANNER],init:async e=>{bi().Countly||(bi().Countly={},bi().Countly.q=[],await n.e(994).then(n.t.bind(n,3994,23)));const o=bi().Countly;o.require_consent=!0,o.url=t;const s=Ji();if(s.then((e=>{o.app_key=e})),o.app_version=r,o.debug=i,e.selectIsIpfsDesktop()&&(o.app_version=e.selectDesktopVersion(),o.q.push(["change_id",e.selectDesktopCountlyDeviceId(),!0])),o.q.push(["track_sessions"]),o.q.push(["track_errors"]),e.selectAnalyticsEnabled()){Qi(e.selectAnalyticsConsent(),e)}else e.selectAnalyticsOptedOut()||(e.selectAnalyticsOptedOutPriorToDefaultOptIn()&&e.doToggleShowAnalyticsBanner(!0),e.doEnableAnalytics());e.subscribeToSelectors(["selectRouteInfo"],(e=>{let{routeInfo:t}=e;bi().location&&bi().location.hash&&bi().Countly.q.push(["track_pageview",t.pattern])})),"function"===typeof o.init&&(await s,o.init())},getMiddleware:()=>()=>e=>t=>{const n=as(t);if(n){const{id:e,duration:r,error:o}=n;!function(e){let{id:t,duration:n}=e;const r=ns.get(t);r?r({id:t,duration:n}):ts({id:t,duration:n})}({id:e,duration:r}),o&&(bi().Countly.q.push(["add_log",t.type]),bi().Countly.q.push(["log_error",o]))}return e(t)},reducer:(e,t)=>{switch(e=e||{lastEnabledAt:0,lastDisabledAt:0,showAnalyticsComponents:!1,showAnalyticsBanner:!1,optedOut:qi,consent:[]},t.type){case Zi.ANALYTICS_ENABLED:return{...e,lastEnabledAt:Date.now(),consent:t.payload.consent,optedOut:!1};case Zi.ANALYTICS_DISABLED:return{...e,lastDisabledAt:Date.now(),consent:t.payload.consent,optedOut:!0,showAnalyticsBanner:!1};case Zi.ANALYTICS_ADD_CONSENT:{const n=e.consent.filter((e=>e!==t.payload.name)).concat(t.payload.name);return{...e,lastEnabledAt:Date.now(),consent:n,optedOut:!1}}case Zi.ANALYTICS_REMOVE_CONSENT:{const n=e.consent.filter((e=>e!==t.payload.name)),r=0===n.length?Date.now():e.lastDisabledAt,o=0===n.length;return{...e,lastDisabledAt:r,consent:n,optedOut:o,showAnalyticsBanner:!1}}case Zi.SET_SHOW_ANALYTICS_BANNER:{var n;const r=(null===(n=t.payload)||void 0===n?void 0:n.shouldShow)||!1;return{...e,showAnalyticsBanner:r}}default:return e.consent?e:e.lastEnabledAt>e.lastDisabledAt?{...e,consent:Xi.safe}:{...e,consent:[]}}},...is,...ss}},fs=(0,H.re)({name:"cliTutorMode",actionBaseType:"CLI_TUTOR_MODE_TOGGLE",persist:!0,checkIfOnline:!1,getPromise:()=>{}});fs.reactIsCliTutorModeEnabled=(0,H.Mz)("selectIsCliTutorModeEnabled",(e=>{const t=Boolean(JSON.parse(localStorage.getItem("isCliTutorModeEnabled")));void 0!==e&&e!==t&&localStorage.setItem("isCliTutorModeEnabled",e)})),fs.selectIsCliTutorModeEnabled=e=>e.cliTutorMode.isCliTutorModeEnabled,fs.selectIsCliTutorModalOpen=e=>!!e.cliTutorMode.showCliTutorModal,fs.selectCliOptions=e=>e.cliTutorMode.cliOptions,fs.reducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"CLI_TUTOR_MODE_TOGGLE"===t.type?{...e,isCliTutorModeEnabled:t.payload}:"CLI_TUTOR_MODAL_ENABLE"===t.type?{...e,showCliTutorModal:t.payload}:"CLI_OPTIONS"===t.type?{...e,cliOptions:t.payload}:e},fs.doToggleCliTutorMode=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODE_TOGGLE",payload:e})},fs.doSetCliOptions=e=>t=>{let{dispatch:n}=t;n({type:"CLI_OPTIONS",payload:e})},fs.doOpenCliTutorModal=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODAL_ENABLE",payload:e})},fs.doOpenCliTutorModal=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODAL_ENABLE",payload:e})},fs.init=e=>{const t=Boolean(JSON.parse(localStorage.getItem("isCliTutorModeEnabled")));return e.doToggleCliTutorMode(t)};const hs=fs;var ds=n(555);const ps={name:"ipns",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keys:[],expectedPublishTime:(0,io.L)("expectedPublishTime")||60},t=arguments.length>1?arguments[1]:void 0;return"CACHE_IPNS_KEYS"===t.type?{...e,keys:t.payload}:"SET_EXPECTED_PUBLISH_TIME"===t.type?{...e,expectedPublishTime:t.payload}:e},selectIpnsKeys:e=>e.ipns.keys||[],selectExpectedPublishTime:e=>e.ipns.expectedPublishTime,doFetchIpnsKeys:()=>async e=>{let{getIpfs:t,dispatch:n}=e;const r=t(),o=await r.key.list(),i=[];for(const{id:s,name:a}of o){const e=(await oo()(r.name.resolve(`/ipns/${s}`,{offline:!0}))).length>0;i.push({id:s,name:a,published:e})}n({type:"CACHE_IPNS_KEYS",payload:i})},doGenerateIpnsKey:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.key.gen(e),r.doFetchIpnsKeys()},doRemoveIpnsKey:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.key.rm(e),r.doFetchIpnsKeys()},doRenameIpnsKey:(e,t)=>async n=>{let{getIpfs:r,store:o}=n;const i=r();await i.key.rename(e,t),o.doFetchIpnsKeys()},doPublishIpnsKey:(e,t)=>async n=>{let{getIpfs:r,store:o}=n;const i=r();await i.name.publish(e,{key:t})},doUpdateExpectedPublishTime:e=>async t=>{let{store:n,dispatch:r}=t;const o=n.selectExpectedPublishTime(),i=Math.floor((1.5*e+o)/2);await(0,io.c)("expectedPublishTime",i),r({type:"SET_EXPECTED_PUBLISH_TIME",payload:i})}},gs=(0,H.QP)((0,H.xq)({cacheFn:Ni.set}),W({idleTimeout:5e3}),z.Ay,Di,Jo,Xo,vi,(0,Qo.Ay)(),ci,yi,ds.Ay,Q,q(),oe,eo(),po,xi,Ii,Oi,Ti,Ri,Mi,hs,cs({}),ps);var ys=n(4004),ms=n(785);function bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ws(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Es=0,As=(0,e.memo)((function(t){var n=t.children,r=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ss(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=t;o[Cs]||(o[Cs]=(0,ms.s)(e,t,n,r));return o[Cs]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(ws(t,["children"])),o=bs(r,2),i=o[0],s=o[1];return e.useEffect((function(){return s&&Es++,function(){s&&(0===--Es&&(Ss()[Cs]=null))}}),[]),e.createElement(ms.M.Provider,{value:i},n)}));As.displayName="DndProvider";var Cs=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function Ss(){return"undefined"!==typeof n.g?n.g:window}var Ts=n(5729);function ks(e){var t=null;return function(){return null==t&&(t=e()),t}}function xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Is=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,(n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var o=[];return n.forEach((function(e){return o.push(e)})),o}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}])&&xs(t.prototype,n),r&&xs(t,r),e}(),Os=ks((function(){return/firefox/i.test(navigator.userAgent)})),Bs=ks((function(){return Boolean(window.safari)}));function Ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ns,Ps=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,o=[],i=0;i<r;i++)o.push(i);o.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var s,a,u=[],l=[],c=[],f=0;f<r-1;f++)s=t[f+1]-t[f],a=n[f+1]-n[f],l.push(s),u.push(a),c.push(a/s);for(var h=[c[0]],d=0;d<l.length-1;d++){var p=c[d],g=c[d+1];if(p*g<=0)h.push(0);else{s=l[d];var y=l[d+1],m=s+y;h.push(3*m/((m+y)/p+(m+s)/g))}}h.push(c[c.length-1]);for(var b,v=[],w=[],E=0;E<h.length-1;E++){b=c[E];var A=h[E],C=1/l[E],S=A+h[E+1]-b-b;v.push((b-A-S)*C),w.push(S*C*C)}this.xs=t,this.ys=n,this.c1s=h,this.c2s=v,this.c3s=w}var t,n,r;return t=e,(n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,o=this.c2s,i=this.c3s,s=t.length-1;if(e===t[s])return n[s];for(var a,u=0,l=i.length-1;u<=l;){var c=t[a=Math.floor(.5*(u+l))];if(c<e)u=a+1;else{if(!(c>e))return n[a];l=a-1}}var f=e-t[s=Math.max(0,l)],h=f*f;return n[s]+r[s]*f+o[s]*h+i[s]*f*h}}])&&Ds(t.prototype,n),r&&Ds(t,r),e}();function Fs(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function _s(e){return{x:e.clientX,y:e.clientY}}function Ls(e,t,n,r,o){var i=function(e){var t;return"IMG"===e.nodeName&&(Os()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),s=Fs(i?e:t),a={x:n.x-s.x,y:n.y-s.y},u=e.offsetWidth,l=e.offsetHeight,c=r.anchorX,f=r.anchorY,h=function(e,t,n,r){var o=e?t.width:n,i=e?t.height:r;return Bs()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}(i,t,u,l),d=h.dragPreviewWidth,p=h.dragPreviewHeight,g=o.offsetX,y=o.offsetY,m=0===y||y;return{x:0===g||g?g:new Ps([0,.5,1],[a.x,a.x/u*d,a.x+d-u]).interpolate(c),y:m?y:function(){var e=new Ps([0,.5,1],[a.y,a.y/l*p,a.y+p-l]).interpolate(f);return Bs()&&i&&(e+=(window.devicePixelRatio-1)*p),e}()}}function Rs(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ms=(Us(Ns={},c.FILE,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),Us(Ns,c.URL,{exposeProperties:{urls:function(e,t){return Rs(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),Us(Ns,c.TEXT,{exposeProperties:{text:function(e,t){return Rs(e,t,"")}},matchesTypes:["Text","text/plain"]}),Ns);function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&js(t.prototype,n),r&&js(t,r),e}();function Hs(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(Ms).filter((function(e){return Ms[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function zs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&zs(t.prototype,n),r&&zs(t,r),e}();function Gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gs(Object(n),!0).forEach((function(t){qs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Zs=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){var t=r.sourceNodes.get(e);return t&&Fs(t)||null},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return Boolean(e&&r.document&&r.document.body&&document.body.contains(e))},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=_s(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var o=e.dataTransfer,i=Hs(o);if(r.monitor.isDragging()){if(o&&"function"===typeof o.setDragImage){var s=r.monitor.getSourceId(),a=r.sourceNodes.get(s),u=r.sourcePreviewNodes.get(s)||a;if(u){var l=r.getCurrentSourcePreviewNodeOptions(),c=Ls(a,u,n,{anchorX:l.anchorX,anchorY:l.anchorY},{offsetX:l.offsetX,offsetY:l.offsetY});o.setDragImage(u,c.x,c.y)}}try{null===o||void 0===o||o.setData("application/json",{})}catch(f){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(i)r.beginDragNativeItem(i);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=Hs(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,Os()||r.actions.hover(t,{clientOffset:_s(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:_s(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){var t;(r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem())&&(null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:_s(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Vs(n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Is(this.isNodeInDocument)}var t,n,r;return t=e,(n=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var o=function(t){return r.handleDragStart(t,e)},i=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",i),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},i=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",o),t.addEventListener("drop",i),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",o),t.removeEventListener("drop",i)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Ws({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return Ws({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(c).some((function(t){return c[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new $s(Ms[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}])&&Ks(t.prototype,n),r&&Ks(t,r),e}();const Ys=e=>{const t=function(e,t){return new Zs(e,t)}(e),n=t.handleTopDropCapture;return t.handleTopDropCapture=e=>{if(n.call(t,e),t.currentNativeSource&&e.dataTransfer.items){if([...e.dataTransfer.items].every((e=>{let{kind:t}=e;return"string"===t})))return;const n=(0,Ts.getFilesFromDataTransferItems)(e.dataTransfer.items);t.currentNativeSource.item.filesPromise=n}},t};console.log("IPFS Web UI - v4.5.0 - https://github.com/ipfs-shipyard/ipfs-webui/commit/007dbb1"),async function(){const n=await Ni.getAll();console.log("%cStop!","color: red; font-size: 40px; font-weight: bold; text-shadow: 2px 2px 0 black;"),console.log("%cThis is a browser feature intended for developers. If someone told you to paste something here, they might be trying to steal your data!","color: black; font-size: 16px; font-weight: bold; background: yellow; padding: 4px; border-radius: 4px;");const o=gs(n);t.render(e.createElement(r.K,{store:o},e.createElement(a.xC,{i18n:ys.A},e.createElement(As,{backend:Ys},e.createElement(L.Fc,null,e.createElement(L.l4,null,e.createElement($,null)))))),document.getElementById("root"))}()})()})();
//# sourceMappingURL=main.58ea6107.js.map